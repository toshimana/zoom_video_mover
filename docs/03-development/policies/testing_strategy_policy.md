# ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãƒãƒªã‚·ãƒ¼ - Zoom Video Mover

**é©ç”¨ç¯„å›²**: å…¨ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆtests/*, src/*/testsï¼‰  
**æˆ¦ç•¥ä½ç½®ã¥ã‘**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤å“è³ªä¿è¨¼æˆ¦ç•¥  
**æ›´æ–°æ—¥**: 2025-08-05

## ğŸ¯ Property-basedãƒ†ã‚¹ãƒˆ - åŸºç›¤å“è³ªä¿è¨¼æˆ¦ç•¥

**ä½ç½®ã¥ã‘**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤å“è³ªä¿è¨¼æˆ¦ç•¥ã¨ã—ã¦ã€1000ã‚±ãƒ¼ã‚¹ä»¥ä¸Šã®è‡ªå‹•æ¤œè¨¼ã«ã‚ˆã‚‹ç¶²ç¾…çš„å“è³ªä¿è¨¼ã‚’å®Ÿç¾

é–¢æ•°ã®æ€§è³ªï¼ˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼‰ã‚’å®šç¾©ã—ã€å¤šæ•°ã®ãƒ©ãƒ³ãƒ€ãƒ å…¥åŠ›ã§æ¤œè¨¼ã™ã‚‹æ‰‹æ³•ï¼š

### ğŸ› ï¸ ä½¿ç”¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **`proptest`**: Rustæ¨™æº–ã®property-basedãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **`quickcheck`**: QuickCheck-style testing
- **`proptest-derive`**: ä»»æ„å€¤ç”Ÿæˆã®è‡ªå‹•å°å‡º

### ğŸ“‹ ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
1. **ãƒ©ã‚¦ãƒ³ãƒ‰ãƒˆãƒªãƒƒãƒ—æ€§è³ª**: ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³â†’ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã®å¯é€†æ€§
2. **ä¸å¤‰æ¡ä»¶**: ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æ•´åˆæ€§ãŒå¸¸ã«ä¿ãŸã‚Œã‚‹
3. **å…¥åŠ›ç¯„å›²**: æœ‰åŠ¹ãªå…¥åŠ›ç¯„å›²ã§ã®å‹•ä½œä¿è¨¼
4. **å¢ƒç•Œæ¡ä»¶**: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã§ã®é©åˆ‡ãªå‹•ä½œ
5. **å†ªç­‰æ€§**: åŒã˜æ“ä½œã‚’è¤‡æ•°å›å®Ÿè¡Œã—ã¦ã‚‚çµæœãŒå¤‰ã‚ã‚‰ãªã„

## ğŸ”¬ é–¢æ•°å˜ä½ã§ã®Property-basedãƒ†ã‚¹ãƒˆè¨­è¨ˆ

å„é–¢æ•°ã®**äº‹å‰æ¡ä»¶ãƒ»äº‹å¾Œæ¡ä»¶ãƒ»ä¸å¤‰æ¡ä»¶**ã‚’åŸºã«ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆï¼š

### 1. äº‹å‰æ¡ä»¶ã®Propertyæ¤œè¨¼
```rust
proptest! {
    #[test]
    fn function_preconditions(input in arb_valid_input()) {
        // äº‹å‰æ¡ä»¶: å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å¦¥å½“æ€§
        prop_assert!(!input.is_empty());
        prop_assert!(input.len() >= MIN_LENGTH);
        
        // é–¢æ•°å®Ÿè¡Œã¯äº‹å‰æ¡ä»¶ãŒæº€ãŸã•ã‚ŒãŸå ´åˆã®ã¿
        let result = function_under_test(input);
        // ...
    }
}
```

### 2. äº‹å¾Œæ¡ä»¶ã®Propertyæ¤œè¨¼
```rust
proptest! {
    #[test]
    fn function_postconditions(input in arb_input()) {
        let result = function_under_test(input).unwrap();
        
        // äº‹å¾Œæ¡ä»¶: çµæœã®å¦¥å½“æ€§
        prop_assert!(!result.is_empty());
        prop_assert!(result.contains_expected_format());
        
        // çµæœã®ä¸€è²«æ€§
        let result2 = function_under_test(input.clone()).unwrap();
        prop_assert_eq!(result, result2); // å†ªç­‰æ€§
    }
}
```

### 3. ä¸å¤‰æ¡ä»¶ã®Propertyæ¤œè¨¼
```rust
proptest! {
    #[test]
    fn function_invariants(input in arb_input()) {
        let original_input = input.clone();
        let system_state_before = capture_system_state();
        
        let result = function_under_test(input);
        
        // ä¸å¤‰æ¡ä»¶: å…¥åŠ›ãŒå¤‰æ›´ã•ã‚Œãªã„
        prop_assert_eq!(input, original_input);
        
        // ä¸å¤‰æ¡ä»¶: ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ã®ä¸€è²«æ€§
        let system_state_after = capture_system_state();
        prop_assert_eq!(system_state_before, system_state_after);
    }
}
```

## ğŸ“ Property-basedãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹

```rust
use proptest::prelude::*;

// ä»»æ„å€¤ç”Ÿæˆå™¨ã®å®šç¾©
prop_compose! {
    fn arb_config()
        (client_id in "[a-zA-Z0-9]{10,50}",
         client_secret in "[a-zA-Z0-9]{20,100}")
        -> Config
    {
        Config { client_id, client_secret, redirect_uri: None }
    }
}

proptest! {
    /// Property: Configã®TOMLãƒ©ã‚¦ãƒ³ãƒ‰ãƒˆãƒªãƒƒãƒ—
    #[test]
    fn config_toml_roundtrip(config in arb_config()) {
        let toml_str = toml::to_string(&config)?;
        let parsed: Config = toml::from_str(&toml_str)?;
        prop_assert_eq!(config, parsed);
    }
}
```

## ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œè¦æ¨¡ãƒ»åŸºç›¤æˆ¦ç•¥ã¨ã—ã¦ã®ä½ç½®ã¥ã‘

```bash
# Property-basedãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆï¼‰
cargo test --test property_tests

# ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
cargo test --lib

# åŸºç›¤æˆ¦ç•¥ã¨ã—ã¦1000ã‚±ãƒ¼ã‚¹ä»¥ä¸Šã®è‡ªå‹•æ¤œè¨¼ã‚’å®Ÿè¡Œ
PROPTEST_CASES=1000 cargo test --test property_tests

# å¤±æ•—ã‚±ãƒ¼ã‚¹ã®æœ€å°åŒ–è¡¨ç¤º
PROPTEST_VERBOSE=1 cargo test --test property_tests
```

### åŸºç›¤æˆ¦ç•¥ã¨ã—ã¦ã®ç‰¹å¾´
- **å®Ÿè¡Œè¦æ¨¡**: 1000ã‚±ãƒ¼ã‚¹ä»¥ä¸Šã®è‡ªå‹•æ¤œè¨¼
- **é©ç”¨é ˜åŸŸ**: ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒ»å¢ƒç•Œå€¤ãƒ»ç•°å¸¸ç³»ã®å®Œå…¨æ¤œè¨¼
- **åŠ¹æœ**: æ‰‹å‹•ãƒ†ã‚¹ãƒˆã§ã¯å›°é›£ãªç¶²ç¾…çš„å“è³ªä¿è¨¼ã‚’å®Ÿç¾
- **å„ªå…ˆåº¦**: å“è³ªä¿è¨¼ã®æœ€é‡è¦åŸºç›¤ã¨ã—ã¦ä½ç½®ã¥ã‘

## ğŸ“… æ—¥æ™‚ãƒ»æ—¥ä»˜ã®æ¤œè¨¼è¦ç´„

### å®Ÿéš›ã®æ—¥æ™‚ã§ã‚ã‚‹ã“ã¨ã®ä¿è¨¼
ã™ã¹ã¦ã®æ—¥æ™‚å‡¦ç†ã«ãŠã„ã¦ã€ä»¥ä¸‹ã®è¦ç´„ã‚’éµå®ˆã™ã‚‹ï¼š

#### 1. æ—¥ä»˜ç”Ÿæˆã®è¦ä»¶
- **å¿…é ˆ**: å®Ÿéš›ã«å­˜åœ¨ã™ã‚‹æ—¥ä»˜ã®ã¿ã‚’ç”Ÿæˆãƒ»å—ã‘å…¥ã‚Œã‚‹
- **æ¤œè¨¼**: `chrono::NaiveDate`ã‚’ä½¿ç”¨ã—ãŸå®Ÿéš›ã®æ—¥ä»˜æ¤œè¨¼
- **å½¢å¼**: `YYYY-MM-DD` å½¢å¼ï¼ˆISO 8601æº–æ‹ ï¼‰

#### 2. æœˆåˆ¥æ—¥æ•°åˆ¶é™ã®éµå®ˆ
```rust
// æœˆã”ã¨ã®æœ€å¤§æ—¥æ•°
match month {
    2 => {
        // ã†ã‚‹ã†å¹´åˆ¤å®š: 4ã§å‰²ã‚Šåˆ‡ã‚Œã€ã‹ã¤100ã§å‰²ã‚Šåˆ‡ã‚Œãªã„ã€ã¾ãŸã¯400ã§å‰²ã‚Šåˆ‡ã‚Œã‚‹
        if year % 4 == 0 && (year % 100 != 0 || year % 400 == 0) {
            29 // ã†ã‚‹ã†å¹´ã®2æœˆ
        } else {
            28 // å¹³å¹´ã®2æœˆ
        }
    },
    4 | 6 | 9 | 11 => 30, // 4æœˆã€6æœˆã€9æœˆã€11æœˆ
    _ => 31, // ãã®ä»–ã®æœˆï¼ˆ1,3,5,7,8,10,12æœˆï¼‰
}
```

#### 3. Property-basedãƒ†ã‚¹ãƒˆã§ã®æ—¥ä»˜æ¤œè¨¼
```rust
prop_compose! {
    fn arb_valid_date()
        (year in 2020i32..2030i32,
         month in 1u32..13u32,
         day_offset in 0u32..31u32)
        -> String
    {
        let max_day = match month {
            2 => if year % 4 == 0 && (year % 100 != 0 || year % 400 == 0) { 29 } else { 28 },
            4 | 6 | 9 | 11 => 30,
            _ => 31,
        };
        let day = (day_offset % max_day) + 1;
        
        // å®Ÿéš›ã®æ—¥ä»˜ã¨ã—ã¦æ¤œè¨¼
        let date = NaiveDate::from_ymd_opt(year, month, day)
            .expect("Generated date should be valid");
        date.format("%Y-%m-%d").to_string()
    }
}
```

#### 4. æ—¥ä»˜ç¯„å›²ã®åˆ¶ç´„
- **é †åºä¿è¨¼**: `from_date <= to_date` ã®é–¢ä¿‚ã‚’å¸¸ã«ç¶­æŒ
- **æœŸé–“åˆ¶é™**: æ¤œç´¢ãƒ»å‡¦ç†ç¯„å›²ã¯å®Ÿç”¨çš„ãªæœŸé–“å†…ï¼ˆé€šå¸¸1å¹´ä»¥å†…ï¼‰
- **ç¯„å›²ç”Ÿæˆ**: `chrono::Duration`ã‚’ä½¿ç”¨ã—ãŸæ—¥ä»˜ç®—è¡“

#### 5. å¿…é ˆæ¤œè¨¼é …ç›®
1. **å½¢å¼æ¤œè¨¼**: æ–‡å­—åˆ—é•·ã€åŒºåˆ‡ã‚Šæ–‡å­—ã€æ•°å€¤ãƒ‘ãƒ¼ãƒˆ
2. **å€¤åŸŸæ¤œè¨¼**: å¹´ãƒ»æœˆãƒ»æ—¥ã®æœ‰åŠ¹ç¯„å›²
3. **å®Ÿåœ¨æ€§æ¤œè¨¼**: `chrono::NaiveDate::parse_from_str`ã«ã‚ˆã‚‹è§£æ
4. **è«–ç†æ¤œè¨¼**: ã†ã‚‹ã†å¹´ã€æœˆæœ«æ—¥ã®æ­£ç¢ºæ€§
5. **é–¢ä¿‚æ¤œè¨¼**: æ—¥ä»˜ç¯„å›²ã®é †åºé–¢ä¿‚

#### 6. Property-basedãƒ†ã‚¹ãƒˆã®å¿…é ˆé …ç›®
- `generated_dates_are_actually_valid`: ç”Ÿæˆã•ã‚ŒãŸæ—¥ä»˜ãŒå®Ÿåœ¨ã™ã‚‹
- `date_range_always_ordered`: æ—¥ä»˜ç¯„å›²ãŒå¸¸ã«é †åºã‚’ä¿ã¤
- `month_day_limits_are_respected`: æœˆã”ã¨ã®æ—¥æ•°åˆ¶é™ã‚’å®ˆã‚‹
- `leap_year_february_29_is_valid`: ã†ã‚‹ã†å¹´åˆ¤å®šã®æ­£ç¢ºæ€§

## ğŸ“Š å“è³ªä¿è¨¼æŒ‡æ¨™

### å¿…é ˆé”æˆç›®æ¨™
- **Property-basedãƒ†ã‚¹ãƒˆ**: é‡è¦é–¢æ•°100%ã‚«ãƒãƒ¬ãƒƒã‚¸
- **å®Ÿè¡Œã‚±ãƒ¼ã‚¹æ•°**: 1000+ã‚±ãƒ¼ã‚¹/é–¢æ•°
- **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100%
- **å¢ƒç•Œå€¤æ¤œè¨¼**: å…¨ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ç¶²ç¾…

### ç¶™ç¶šç›£è¦–æŒ‡æ¨™
- **æ—¥æ¬¡**: æ–°è¦é–¢æ•°ã®Propertyè¿½åŠ 
- **é€±æ¬¡**: ãƒ†ã‚¹ãƒˆå¤±æ•—ã®åŸå› åˆ†æãƒ»ä¿®æ­£
- **æœˆæ¬¡**: ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®è¦‹ç›´ã—ãƒ»æ”¹å–„

---

**æˆ¦ç•¥çš„ä½ç½®ã¥ã‘**: Property-basedãƒ†ã‚¹ãƒˆã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åŸºç›¤å“è³ªä¿è¨¼æˆ¦ç•¥ã¨ã—ã¦æœ€å„ªå…ˆã§å®Ÿæ–½ã•ã‚Œã¾ã™ã€‚