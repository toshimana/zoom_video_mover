# ドキュメント体系化フレームワーク

## 1. 概要

本文書は、ソフトウェア開発プロジェクトにおけるドキュメント体系の階層構造と管理方針を定義します。ドキュメントを「ポリシー」「ルール」「成果物」の3層に分類し、さらに依存性による4段階の管理レベルを適用することで、再利用性と保守性の高いドキュメント体系を実現します。

## 2. ドキュメント階層構造

### 2.1 3層階層モデル

```
┌─────────────────────────────────────────────┐
│                   ポリシー                   │  ← 方針・原則
│                  (Policies)                  │     What & Why
├─────────────────────────────────────────────┤
│                    ルール                    │  ← 実施規則
│                   (Rules)                    │     How
├─────────────────────────────────────────────┤
│                   成果物                     │  ← 実装結果
│                 (Artifacts)                  │     Implementation
└─────────────────────────────────────────────┘
```

### 2.2 各階層の定義

#### ポリシー（Policies）
- **定義**: プロジェクトやシステムの基本方針、原則、哲学を定義
- **特徴**: 抽象度が高く、長期的に安定
- **内容**: 
  - 品質方針
  - セキュリティ方針
  - 開発方針
  - テスト方針
- **例**: 「すべてのコードは自動テストでカバーされるべきである」

#### ルール（Rules）
- **定義**: ポリシーを実現するための具体的な規則、手順、ガイドライン
- **特徴**: 実行可能で検証可能な規則
- **内容**:
  - コーディング規約
  - 命名規則
  - レビュー手順
  - ブランチ戦略
- **例**: 「関数名はsnake_caseで記述し、動詞から始める」

#### 成果物（Artifacts）
- **定義**: ポリシーとルールに基づいて作成された実際の文書、コード、設計書
- **特徴**: プロジェクト固有で具体的
- **内容**:
  - 要件定義書
  - 設計書
  - ソースコード
  - テストケース
  - ユーザーマニュアル
- **例**: 「zoom_video_mover_requirements.md」

## 3. 依存性による4段階管理レベル

### 3.1 管理レベルの定義

```
Level 1: 汎用（プロジェクト非依存、技術要素非依存）
    ↓
Level 2: 技術固有（プロジェクト非依存、技術要素依存）
    ↓
Level 3: プロジェクト汎用（プロジェクト依存、技術要素非依存）
    ↓
Level 4: プロジェクト固有（プロジェクト依存、技術要素依存）
```

### 3.2 各レベルの詳細

#### Level 1: 汎用（Universal）
- **特徴**: あらゆるプロジェクト、技術で適用可能
- **再利用性**: 最高
- **例**:
  - ソフトウェア品質管理ポリシー
  - V字モデル開発プロセス定義
  - 一般的なセキュリティ方針
- **フォルダ**: `/docs/policies/universal/`

#### Level 2: 技術固有（Technology-Specific）
- **特徴**: 特定の技術・言語に依存、プロジェクトには非依存
- **再利用性**: 高（同一技術採用プロジェクト間）
- **例**:
  - Rustコーディング規約
  - React設計パターン
  - PostgreSQL運用ルール
- **フォルダ**: `/docs/policies/technology-specific/`

#### Level 3: プロジェクト汎用（Project-Generic）
- **特徴**: 特定プロジェクトの方針、技術には非依存
- **再利用性**: 中（類似ドメインプロジェクト）
- **例**:
  - Zoom Video Moverビジネスルール
  - ドメイン用語集
  - 業務フロー定義
- **フォルダ**: `/docs/policies/project-generic/`

#### Level 4: プロジェクト固有（Project-Specific）
- **特徴**: 特定プロジェクト、特定技術に完全依存
- **再利用性**: 低（当該プロジェクトのみ）
- **例**:
  - Zoom API統合仕様
  - egui画面実装ガイド
  - Windows固有処理仕様
- **フォルダ**: `/docs/policies/project-specific/`

## 4. フォルダ構造

### 4.1 推奨フォルダ構造

```
/docs/
├── policies/                    # ポリシー層
│   ├── universal/               # Level 1: 汎用
│   │   ├── quality_policy.md
│   │   ├── security_policy.md
│   │   └── development_policy.md
│   ├── technology-specific/     # Level 2: 技術固有
│   │   ├── rust/
│   │   │   ├── coding_policy.md
│   │   │   └── testing_policy.md
│   │   └── oauth/
│   │       └── oauth_policy.md
│   ├── project-generic/         # Level 3: プロジェクト汎用
│   │   ├── business_rules.md
│   │   └── domain_glossary.md
│   └── project-specific/        # Level 4: プロジェクト固有
│       ├── zoom_integration.md
│       └── windows_specific.md
│
├── rules/                        # ルール層
│   ├── universal/               # Level 1: 汎用
│   │   ├── code_review_rules.md
│   │   └── git_workflow_rules.md
│   ├── technology-specific/     # Level 2: 技術固有
│   │   ├── rust_conventions.md
│   │   └── cargo_rules.md
│   ├── project-generic/         # Level 3: プロジェクト汎用
│   │   └── naming_rules.md
│   └── project-specific/        # Level 4: プロジェクト固有
│       └── api_usage_rules.md
│
└── artifacts/                    # 成果物層
    ├── requirements/            # 要件定義成果物
    ├── design/                  # 設計成果物
    ├── implementation/          # 実装成果物
    └── testing/                 # テスト成果物
```

## 5. ドキュメント作成ガイドライン

### 5.1 ポリシー作成時の考慮事項

1. **抽象度の維持**
   - 具体的な実装詳細は含めない
   - 原則と理由（Why）を明確に記述
   - 長期的な視点で記述

2. **スコープの明確化**
   - 適用範囲を明示
   - 例外事項を明記
   - 関連ポリシーとの関係を記載

3. **測定可能性**
   - ポリシー遵守の判定基準を含める
   - 品質指標を定義

### 5.2 ルール作成時の考慮事項

1. **具体性と実行可能性**
   - 曖昧さを排除
   - ステップバイステップの手順
   - チェックリスト形式の活用

2. **検証可能性**
   - 自動チェック可能な項目を優先
   - ツールとの連携方法を記載
   - 違反時の対処法を明記

3. **更新容易性**
   - バージョン管理
   - 変更履歴の記録
   - 影響分析の実施

### 5.3 成果物作成時の考慮事項

1. **トレーサビリティ**
   - 対応するポリシー・ルールを明記
   - 要件との関連付け
   - 変更管理の実施

2. **完全性**
   - 必要な情報の網羅
   - レビュー済みマーク
   - 承認記録

3. **保守性**
   - 更新日時の記録
   - 作成者・更新者情報
   - 関連文書へのリンク

## 6. 文書間の関係性

### 6.1 縦の関係（階層間）

```
ポリシー「テストカバレッジ80%以上」
    ↓ 具体化
ルール「単体テストはxUnitフレームワークを使用」
    ↓ 実装
成果物「test_auth.rs（実際のテストコード）」
```

### 6.2 横の関係（同一階層内）

```
Level 1 ポリシー ←参照→ Level 1 ポリシー
Level 2 ルール ←継承→ Level 1 ルール
Level 4 成果物 ←依存→ Level 3 成果物
```

## 7. 管理プロセス

### 7.1 新規文書作成プロセス

1. **分類判定**
   - ポリシー/ルール/成果物のどれか
   - Level 1-4のどれか

2. **配置決定**
   - 適切なフォルダに配置
   - 命名規則に従った名前付け

3. **関係定義**
   - 関連文書との紐付け
   - 相互参照の設定

4. **レビュー**
   - 分類の妥当性確認
   - 内容の適切性確認

### 7.2 文書更新プロセス

1. **影響分析**
   - 下位文書への影響確認
   - 横断的な影響確認

2. **更新実施**
   - バージョン番号更新
   - 変更履歴記録

3. **整合性確認**
   - 関連文書との整合性
   - トレーサビリティ維持

4. **通知**
   - 関係者への変更通知
   - 移行計画の策定（必要時）

## 8. 品質基準

### 8.1 ポリシー品質基準

- **明確性**: 解釈の余地が最小限
- **一貫性**: 他のポリシーと矛盾しない
- **実現可能性**: 現実的に達成可能
- **測定可能性**: 遵守状況を測定可能

### 8.2 ルール品質基準

- **具体性**: 実行手順が明確
- **検証可能性**: 遵守/違反を判定可能
- **実用性**: 実際の作業で使用可能
- **保守性**: 更新が容易

### 8.3 成果物品質基準

- **完全性**: 必要情報を網羅
- **正確性**: 誤りがない
- **追跡可能性**: 要件まで追跡可能
- **理解容易性**: 読みやすく理解しやすい

## 9. ツール連携

### 9.1 自動化ツール

- **文書生成**: テンプレートからの自動生成
- **整合性チェック**: 文書間の参照整合性検証
- **バージョン管理**: Git等での履歴管理
- **検索・分析**: 全文検索、影響分析ツール

### 9.2 管理ツール

- **分類管理**: 文書分類データベース
- **承認ワークフロー**: 電子承認システム
- **通知システム**: 変更通知の自動配信
- **メトリクス収集**: 文書品質指標の自動収集

## 10. 移行戦略

### 10.1 既存文書の移行

1. **現状分析**
   - 既存文書の棚卸し
   - 分類マッピング作成

2. **段階的移行**
   - Level 1から順次移行
   - 重要度の高い文書を優先

3. **品質改善**
   - 移行時に品質基準適用
   - 不足情報の補完

### 10.2 組織への展開

1. **パイロット適用**
   - 小規模プロジェクトで試行
   - フィードバック収集

2. **改善と標準化**
   - 課題の解決
   - ベストプラクティス確立

3. **全面展開**
   - 組織全体への適用
   - 継続的改善プロセス確立

## まとめ

本フレームワークにより、以下の効果が期待できます：

1. **再利用性の向上**: 依存性レベルによる適切な文書配置
2. **保守性の向上**: 明確な階層構造による影響範囲の特定
3. **品質向上**: 各階層での品質基準適用
4. **効率化**: 自動化ツールとの連携による作業効率化
5. **知識継承**: 体系的な文書管理による知識の蓄積と継承

このフレームワークを適切に運用することで、プロジェクトの規模や技術スタックに関わらず、一貫性のある高品質なドキュメント体系を維持できます。