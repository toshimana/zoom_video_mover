# Git ワークフローポリシー - Zoom Video Mover

**適用範囲**: 全開発者・全ソースコード変更  
**遵守レベル**: 必須（100%遵守）  
**更新日**: 2025-08-05

## 🚨 必須：やりとり完了時の自動コミット

**Claude Code Assistantは以下の指示に絶対従う必要がある：**

### 🚨 重要：毎回のコミット実行
- **すべてのやりとり完了時に必ずgitコミットを実行する**
- **例外は一切認めない**
- **忘れた場合は即座に実行する**

### 📋 コミット手順（必須実行）
```bash
# 1. 変更されたファイルをすべてステージング
git add .

# 2. コミットメッセージとして対話内容の要約を記載
git commit -m "[対話内容の要約] 🤖 Generated with Claude Code

Co-Authored-By: Claude <noreply@anthropic.com>"
```

### ⚠️ 強制実行規則
1. **どんな小さな変更でもコミットする**
2. **やりとりが完了したら即座にコミット**
3. **他のタスクより優先してコミット**
4. **ユーザーが明示的に禁止しない限り必ずコミット**
5. **コミットを忘れた場合は次の対話開始時に前回分をコミット**

### 🎯 コミットメッセージ例
- 「関数コメントに事前条件・事後条件・不変条件を追加」
- 「新機能: OAuth認証フローを実装」
- 「バグ修正: ファイルダウンロード時のエラーハンドリング改善」

## 📋 コミット品質基準

### 必須要素
1. **変更概要**: 何を変更したかの簡潔な説明
2. **変更理由**: なぜ変更が必要だったか
3. **Co-Authored-By**: Claude Code Assistant由来の明記
4. **絵文字**: 🤖 マーク必須

### コミットメッセージテンプレート
```
[変更カテゴリ]: [変更内容の簡潔な説明]

[詳細説明（必要に応じて）]

🤖 Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

### 変更カテゴリ
- **新機能**: 新しい機能の実装
- **バグ修正**: 不具合の修正
- **リファクタリング**: コード構造の改善
- **テスト**: テストコードの追加・修正
- **ドキュメント**: ドキュメントの更新
- **設定**: 設定ファイルの変更
- **依存関係**: 依存ライブラリの更新

## 🔒 コミット前の品質チェック

### 必須チェック項目
```bash
# 1. 型チェック
cargo check

# 2. 静的解析
cargo clippy

# 3. フォーマット確認
cargo fmt --check

# 4. テスト実行
cargo test
```

### チェック失敗時の対応
- **型エラー**: 修正後にコミット
- **clippy警告**: 解決後にコミット
- **フォーマット不正**: `cargo fmt`実行後にコミット
- **テスト失敗**: 修正後にコミット

## 🚫 禁止事項

### 絶対に行わない操作
- **git config更新**: 設定変更は禁止
- **インタラクティブ操作**: `git rebase -i`等は使用禁止
- **強制プッシュ**: `git push --force`は禁止
- **リモート操作**: ユーザー明示指示なしでのpushは禁止

### 例外処理
- **pre-commit hook失敗**: 1回のみリトライ許可
- **hook修正後**: コミット修正（amend）必須
- **空コミット**: 変更がない場合はコミット不要

## 📊 品質保証

### 自動化チェック
- **pre-commit hook**: フォーマット・型チェック自動実行
- **CI/CD統合**: push時の自動品質チェック
- **トレーサビリティ**: 変更内容の自動追跡

### 監視指標
- **コミット率**: 対話完了時100%
- **品質チェック通過率**: 100%
- **メッセージ品質**: テンプレート準拠率100%

## 🔄 継続的改善

### 定期レビュー
- **週次**: コミット品質レビュー
- **月次**: ワークフロー効率化検討
- **四半期**: ポリシー見直し

### 改善アクション
- コミットメッセージの改善
- 自動化レベルの向上
- エラー処理の最適化

---

**遵守必須**: このGitワークフローポリシーは全開発活動で100%遵守が必要です。