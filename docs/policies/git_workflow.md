# Git ワークフローポリシー - Zoom Video Mover

**適用範囲**: 全開発者・全ソースコード変更
**遵守レベル**: 必須（100%遵守）

## 必須：やりとり完了時の自動コミット

**Claude Code Assistantは以下の指示に絶対従う必要がある：**

### 毎回のコミット実行（セキュリティ例外あり）
- **すべてのやりとり完了時に必ずgitコミットを実行する**
- **セキュリティ検証後の安全確認済みコミットのみ実行**
- **機密情報検知時は一時停止・承認後実行**

### セキュリティ検証付きコミット手順
```bash
# 1. セキュリティ事前チェック
git diff --cached | grep -E "(password|api[_-]?key|secret|token)" && echo "機密情報検知 - 手動確認必要"

# 2. 変更されたファイルをステージング（検証後）
git add .

# 3. セキュリティ確認済みコミット実行
git commit -m "[対話内容の要約]

Co-Authored-By: Claude <noreply@anthropic.com>"
```

### 強制実行規則
1. **どんな小さな変更でもコミットする**
2. **やりとりが完了したら即座にコミット**
3. **他のタスクより優先してコミット**
4. **ユーザーが明示的に禁止しない限り必ずコミット**
5. **コミットを忘れた場合は次の対話開始時に前回分をコミット**

## コミットメッセージテンプレート

```
[変更カテゴリ]: [変更内容の簡潔な説明]

[詳細説明（必要に応じて）]

Co-Authored-By: Claude <noreply@anthropic.com>
```

### 変更カテゴリ
- **feat**: 新しい機能の実装
- **fix**: 不具合の修正
- **refactor**: コード構造の改善
- **test**: テストコードの追加・修正
- **docs**: ドキュメントの更新
- **chore**: 設定ファイル・依存関係の変更

## コミット前の品質チェック

```bash
cargo check && cargo clippy && cargo fmt --check && cargo test
```

### チェック失敗時の対応
- **型エラー**: 修正後にコミット
- **clippy警告**: 解決後にコミット
- **フォーマット不正**: `cargo fmt`実行後にコミット
- **テスト失敗**: 修正後にコミット

## 禁止事項

- **git config更新**: 設定変更は禁止
- **インタラクティブ操作**: `git rebase -i`等は使用禁止
- **強制プッシュ**: `git push --force`は禁止
- **リモート操作**: ユーザー明示指示なしでのpushは禁止
