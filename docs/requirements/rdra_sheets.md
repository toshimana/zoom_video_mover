# RDRA シート集

---

# RDRA Sheet 01: 要求・アクター・外部システム（L1 システム価値）

**プロジェクト**: Zoom Video Mover
**RDRA準拠版**: 2.0
**作成日**: 2026-02-19
**ステータス**: 初版

---

## 1. アクター定義

| ID | アクター名 | 種別 | 説明 | 導出元 |
|----|-----------|------|------|--------|
| ACTOR-001 | 企業ユーザー | プライマリ | 中小企業〜大企業のIT管理者・PM・一般ユーザー。大量録画の定期バックアップ、法的コンプライアンス対応、ストレージコスト削減を目的とする | stakeholder_analysis.md §1, §3 |
| ACTOR-002 | 個人ユーザー | プライマリ | フリーランス・コンサルタント・教育者。個人規模での録画保存、重要会議のアーカイブ、オフライン視聴を目的とする | stakeholder_analysis.md §2 |
| ACTOR-003 | IT管理者 | セカンダリ | 企業IT部門のシステム運用・セキュリティ管理者。セキュリティ要件充足、監査証跡確保、運用負荷最小化を目的とする | stakeholder_analysis.md §3 |

> **矛盾解決 #2**: stakeholder_analysis.md では6名（企業ユーザー、個人ユーザー、IT管理者、開発チーム、Zoom社、Microsoft）を列挙しているが、トレーサビリティマトリックスではSH-001〜004の4名のみ。RDRA正準化にあたり、**システム利用アクター**を3名（ACTOR-001〜003）とし、開発チーム・Zoom社・MicrosoftはEXTSYSまたはスコープ外として整理した。

---

## 2. 外部システム定義

| ID | 外部システム名 | 種別 | 提供サービス | 制約・制限 | 導出元 |
|----|--------------|------|------------|-----------|--------|
| EXTSYS-001 | Zoom Cloud Platform | APIプロバイダー | OAuth認証（トークン発行）、Recording API（録画リスト・メタデータ）、File Storage（録画ファイル配信）、AI Services（AI要約データ） | レート制限: 10 req/sec、OAuth 2.0必須、権限スコープ制限 | context_diagram.md §外部システム, stakeholder_analysis.md §5 |
| EXTSYS-002 | ローカルファイルシステム | プラットフォーム | NTFS/ReFS対応、ファイル読み書き、ディレクトリ管理 | ファイルパス260文字制限（レガシー）、予約語・特殊文字制限、UAC権限 | context_diagram.md §Windows OS |

---

## 3. 要求定義（機能要求）

| ID | 要求名 | 説明 | 優先度 | 導出元ID | 導出元文書 |
|----|--------|------|--------|---------|-----------|
| REQ-001 | OAuth認証 | Zoom API OAuth 2.0認証フローを実装し、アクセストークン・リフレッシュトークンを管理する | 高 | FR001 | rdra_analysis_models.md §5.1 |
| REQ-002 | 録画一覧取得 | Zoom Cloud Recording APIを呼び出し、会議別階層構造で録画リストを取得・表示する | 高 | FR002 | rdra_analysis_models.md §5.1 |
| REQ-003 | ファイルダウンロード | 動画・音声・チャット・トランスクリプト・AI要約を並列ストリーミングダウンロードする | 高 | FR003 | rdra_analysis_models.md §5.1 |
| REQ-004 | GUI操作 | egui/eframeによるタブ構造の操作画面を提供する（設定・録画検索・ダウンロード・ログ） | 中 | FR004 | rdra_analysis_models.md §5.1 |
| REQ-005 | CLI操作 | コマンドライン実行モードを提供し、スクリプト自動化を可能にする | 中 | FR005 | rdra_analysis_models.md §5.1 |
| REQ-006 | 進捗表示 | ダウンロード進捗をリアルタイム表示する（全体進捗バー、ファイル別進捗、転送速度、残り時間） | 中 | FR006 | rdra_analysis_models.md §5.1 |
| REQ-007 | エラーハンドリング | エラーを分類し、自動リトライ・回復処理・ユーザー通知を行う | 高 | FR007 | rdra_analysis_models.md §5.1 |
| REQ-008 | 設定管理 | config.tomlによる設定永続化（OAuth設定、ダウンロード設定、UI設定） | 高 | FR008 | rdra_analysis_models.md §5.1 |

---

## 4. 要求定義（非機能要求）

| ID | 要求名 | 分類 | 基準 | 導出元ID | 導出元文書 |
|----|--------|------|------|---------|-----------|
| REQ-009 | 同時ダウンロード数 | 性能 | 最大5並列（設定値: 1-10の範囲） | NFR001 | rdra_analysis_models.md §5.2 |
| REQ-010 | レスポンス時間 | 性能 | API呼出し3秒以内、UI更新500ms以内 | NFR002 | rdra_analysis_models.md §5.2 |
| REQ-011 | エラー回復 | 可用性 | 自動リトライ最大3回、指数バックオフ | NFR003 | rdra_analysis_models.md §5.2 |
| REQ-012 | 認証情報保護 | セキュリティ | AES-256-GCMによるローカル暗号化保存 | NFR004 | rdra_analysis_models.md §5.2 |
| REQ-013 | Windows対応 | 互換性 | Windows 10 Version 1903以上（x64） | NFR005 | rdra_analysis_models.md §5.2 |
| REQ-014 | 日本語対応 | 使いやすさ | 日本語UI完全対応、文字化けなし | NFR006 | rdra_analysis_models.md §5.2 |
| REQ-015 | ログ出力 | 保守性 | 構造化ログ、デバッグレベル対応、機密情報マスク | NFR007 | rdra_analysis_models.md §5.2 |
| REQ-016 | モジュール分離設計 | 拡張性 | コンポーネント分離アーキテクチャ（auth, api, download, config, ui） | NFR008 | rdra_analysis_models.md §5.2 |

---

## 5. ACTOR-REQ 関係性テーブル

| | REQ-001 | REQ-002 | REQ-003 | REQ-004 | REQ-005 | REQ-006 | REQ-007 | REQ-008 | REQ-009 | REQ-010 | REQ-011 | REQ-012 | REQ-013 | REQ-014 | REQ-015 | REQ-016 |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| **ACTOR-001** | O | O | O | O | - | O | O | O | O | O | O | O | O | O | - | - |
| **ACTOR-002** | O | O | O | O | - | O | O | O | O | O | O | O | O | O | - | - |
| **ACTOR-003** | O | - | - | O | O | - | O | O | O | O | O | O | O | O | O | O |

**凡例**: O = 直接関係あり、- = 直接関係なし

---

## 6. ACTOR-EXTSYS 関係性テーブル

| | EXTSYS-001 | EXTSYS-002 |
|---|---|---|
| **ACTOR-001** | 間接（システム経由でAPI利用） | 間接（ダウンロード先として利用） |
| **ACTOR-002** | 間接（システム経由でAPI利用） | 間接（ダウンロード先として利用） |
| **ACTOR-003** | 間接（設定・監視経由） | 直接（出力先管理・権限設定） |

---

## 7. EXTSYS-REQ 依存テーブル

| | REQ-001 | REQ-002 | REQ-003 | REQ-007 | REQ-009 | REQ-010 | REQ-011 | REQ-012 |
|---|---|---|---|---|---|---|---|---|
| **EXTSYS-001** | O | O | O | O | O | O | O | O |
| **EXTSYS-002** | - | - | O | O | - | - | - | O |

**凡例**: O = 依存関係あり（外部システムの制約が要求に影響）

---

## 8. 矛盾解決記録

| # | 矛盾内容 | 解決方針 | 根拠 |
|---|---------|---------|------|
| 2 | ステークホルダー数の不一致: トレーサビリティのSH-001〜004 vs stakeholder_analysisの6名 | システム利用者をACTOR-001〜003の3名に正規化。開発チームはスコープ外、Zoom社・MicrosoftはEXTSYS-001/002として再分類 | RDRA標準ではアクターはシステムの直接・間接利用者に限定 |
| 3 | FR数の不一致: FR001-FR006 vs 後に追加されたFR007-FR008 | FR001-FR008の8件全てをREQ-001〜008として採用。NFR001-NFR008をREQ-009〜016として統合 | rdra_analysis_models.md §5.1の最新版を正とする |

---

# RDRA Sheet 02: BUCシート（L2 業務 + L3 利用）

**プロジェクト**: Zoom Video Mover
**RDRA準拠版**: 2.0
**作成日**: 2026-02-19
**ステータス**: 初版

---

## 1. ビジネス（BIZ）定義

| ID | ビジネス名 | 説明 | 導出元 |
|----|-----------|------|--------|
| BIZ-001 | Zoom録画管理業務 | Zoomクラウドレコーディングをローカル環境にダウンロード・整理・保存する業務全体。定期バックアップ、プロジェクトアーカイブ、重要会議保存、AI要約取得を含む | business_flow_diagram.md, business_value_definition.md |

---

## 2. ビジネスユースケース（BUC）定義

| ID | BUC名 | 所属BIZ | 説明 | 含むUC | 導出元 |
|----|-------|---------|------|--------|--------|
| BUC-001 | 初期設定・認証 | BIZ-001 | OAuth認証情報の設定、認証実行、アプリケーション設定の初期構成 | UC-001, UC-002, UC-009, UC-010 | business_flow_diagram.md §To-Be初回設定 |
| BUC-002 | 録画取得・保存 | BIZ-001 | 録画の検索・選択・並列ダウンロード・ファイル整理・進捗監視・エラー処理 | UC-003, UC-004, UC-005, UC-006, UC-007 | business_flow_diagram.md §To-Be効率化プロセス |
| BUC-003 | AI要約取得 | BIZ-001 | 会議のAI要約データ取得・構造化・JSON保存 | UC-008 | business_flow_diagram.md §To-Be自動化プロセス |

> **矛盾解決 #1**: rdra_analysis_models.md ではUC1-UC3の3件のみ定義されていたが、usecase_specifications.md ではUC001-UC010の10件が詳細定義されている。RDRA正準化にあたり、UC001-UC010を正とし、BUC-001〜003に適切にグルーピングした。rdra_analysis_models.md のUC1-UC3は粗粒度の概要定義であり、UC001-UC010の詳細定義が上位互換として採用される。

---

## 3. アクティビティ（ACT）定義

| ID | アクティビティ名 | 所属BUC | アクター | 説明 | 導出元シナリオ |
|----|-----------------|---------|---------|------|---------------|
| ACT-001 | OAuth設定入力 | BUC-001 | ACTOR-001, ACTOR-002 | Client ID/Secret/Redirect URIを入力し設定を保存する | US-001（シナリオ1: 初回設定部分） |
| ACT-002 | 認証実行・確認 | BUC-001 | ACTOR-001, ACTOR-002 | ブラウザでZoom認証を実行し、トークンを取得する | US-001（シナリオ1: 認証部分） |
| ACT-003 | 検索条件設定 | BUC-002 | ACTOR-001, ACTOR-002 | 検索期間・ファイル種別フィルタ・会議名パターンを設定する | US-001: シナリオ1（月次期間設定）, US-002: シナリオ2（プロジェクト期間設定） |
| ACT-004 | 録画リスト確認 | BUC-002 | ACTOR-001, ACTOR-002 | 取得した録画リストの内容を会議別階層構造で確認する | US-001〜US-003 |
| ACT-005 | ファイル選択 | BUC-002 | ACTOR-001, ACTOR-002 | ダウンロード対象ファイルを選択（全選択/個別選択）する | US-001: シナリオ1（全選択）, US-002: シナリオ2（選択的） |
| ACT-006 | ダウンロード実行指示 | BUC-002 | ACTOR-001, ACTOR-002 | ダウンロード開始ボタンを押して並列ダウンロードを開始する | US-001〜US-003 |
| ACT-007 | 進捗監視 | BUC-002 | ACTOR-001, ACTOR-002 | ダウンロード進捗をリアルタイムで確認する | US-001: シナリオ1（進捗通知確認） |
| ACT-008 | エラー対応 | BUC-002 | ACTOR-001, ACTOR-003 | エラー通知を確認し、必要に応じて対処する | US-007: シナリオ7（大量データ移行エラー） |
| ACT-009 | 完了確認 | BUC-002 | ACTOR-001, ACTOR-002 | ダウンロード結果レポートを確認し、ファイルの存在を検証する | US-001: シナリオ1（完了確認） |
| ACT-010 | AI要約取得指示 | BUC-003 | ACTOR-001 | AI要約対応会議の要約データ取得を指示する | US-002: シナリオ2（AI要約付きアーカイブ） |
| ACT-011 | 設定変更 | BUC-001 | ACTOR-001, ACTOR-003 | ダウンロード設定・表示設定・ログレベル等を変更する | US-005: 設定管理 |
| ACT-012 | ログ確認 | BUC-001 | ACTOR-003 | 実行ログ・エラーログを確認し、運用状況を把握する | UC-010: ログ確認 |

> **矛盾解決 #6**: usage_scenarios.md ではUS-001〜US-006の6件がトレーサビリティに記録されているが、実際には9シナリオ（プライマリ3件+セカンダリ3件+エクストリーム3件）が定義されている。ACT導出にあたり、9シナリオ全てからアクティビティを抽出した。

---

## 4. ユースケース（UC）定義

| ID | UC名 | 所属BUC | 主アクター | 説明 | 導出元ID |
|----|------|---------|-----------|------|---------|
| UC-001 | OAuth認証設定 | BUC-001 | ACTOR-001, ACTOR-002 | Client ID/Secret/Redirect URI入力、検証、TOML保存 | UC001 |
| UC-002 | 認証実行 | BUC-001 | システム | OAuth認証フロー実行、トークン取得・暗号化保存、トークンリフレッシュ | UC002 |
| UC-003 | 録画検索 | BUC-002 | ACTOR-001, ACTOR-002 | 期間・種別指定検索、Zoom Recording API呼出し、ページネーション処理、会議別階層表示 | UC003 |
| UC-004 | ファイル選択 | BUC-002 | ACTOR-001, ACTOR-002 | 階層チェックボックス操作、選択統計表示（ファイル数・容量・推定時間） | UC004 |
| UC-005 | ダウンロード実行 | BUC-002 | システム | 並列ストリーミングダウンロード、ファイル整合性チェック、ファイル名サニタイズ・保存 | UC005 |
| UC-006 | 進捗監視 | BUC-002 | システム | 全体/個別進捗計算、転送速度・残り時間推定、500ms間隔UI更新 | UC006 |
| UC-007 | エラー処理 | BUC-002 | システム | エラー検出・分類、自動リトライ（指数バックオフ）、回復処理・ユーザー通知 | UC007 |
| UC-008 | AI要約取得 | BUC-003 | ACTOR-001 | Zoom AI API呼出し、要約データ構造化、キーポイント・アクションアイテム抽出、JSON保存（COND-007: AI要約存在が事前条件） | UC008 |
| UC-009 | 設定管理 | BUC-001 | ACTOR-003 | ダウンロード設定・UI設定・フィルタ設定の保存・読込 | UC009 |
| UC-010 | ログ確認 | BUC-001 | ACTOR-003 | アプリケーションログ・APIログ・エラーログの表示・フィルタリング | UC010 |

---

## 5. 画面（SCR）定義

| ID | 画面名 | 使用UC | 説明 | 導出元 |
|----|--------|--------|------|--------|
| SCR-001 | メイン画面 | UC-001〜UC-010 | アプリケーションフレーム。タブバー（設定・録画検索・ダウンロード・ログ）、ステータスバー | ui_design_specifications.md SC001 |
| SCR-002 | 設定画面 | UC-001, UC-009 | OAuth認証設定、ダウンロード設定、表示・動作設定の入力フォーム | ui_design_specifications.md SC002 |
| SCR-003 | 録画検索画面 | UC-003, UC-004 | 検索条件入力、録画リスト表示（ツリー構造）、ファイル選択チェックボックス | ui_design_specifications.md タブ構造（§画面構成）より導出 |
| SCR-004 | ダウンロード画面 | UC-005, UC-006 | 全体進捗バー、ファイル別進捗リスト、転送速度表示、一時停止/再開/キャンセルボタン | ui_design_specifications.md タブ構造（§画面構成）より導出 |
| SCR-005 | ログ画面 | UC-010 | ログ一覧表示、レベルフィルタ、検索機能 | ui_design_specifications.md タブ構造（§画面構成）より導出 |
| SCR-006 | 認証ダイアログ | UC-002 | ブラウザ認証誘導、認証状態表示、認証完了/失敗通知 | ui_design_specifications.md ダイアログ |

---

## 6. イベント（EVT）定義 [新規合成]

> **分類基準**: 外部 = システム境界外からのシグナル（API応答、ユーザー操作等）、内部 = システム内部で検出・生成されるシグナル（タイムアウト検出、処理完了等）

| ID | イベント名 | 種別 | トリガーUC | 説明 | 導出根拠 |
|----|-----------|------|-----------|------|---------|
| EVT-001 | OAuthコールバック受信 | 外部 | UC-002 | Zoom OAuthサーバーからRedirect URIに認証コードが送信される | UC002 基本フロー Step 6-7 |
| EVT-002 | 録画リストAPIレスポンス | 外部 | UC-003 | Zoom Recording APIから録画メタデータのJSONレスポンスが返却される | UC003 基本フロー Step 7 |
| EVT-003 | ファイルダウンロード完了 | 内部 | UC-005 | 個別ファイルのストリーミングダウンロードが正常完了する | UC005 基本フロー Step 6 |
| EVT-004 | エラー検出 | 内部 | UC-007 | ネットワークエラー・認証エラー・API制限エラー等が検出される | UC007 エラー分類表 |
| EVT-005 | トークン期限切れ検出 | 内部 | UC-002, UC-007 | アクセストークンのexpires_atが現在時刻を過ぎたことを検出する | UC002 代替フローA2 |
| EVT-006 | AI要約APIレスポンス | 外部 | UC-008 | Zoom AI APIから会議要約データが返却される | UC008 基本フロー Step 3 |
| EVT-007 | ユーザー操作イベント | 外部（ユーザー） | UC-005, UC-006 | ユーザーがダウンロードの一時停止・再開・キャンセルを指示する | UC005 代替フローA2 |

---

## 7. タイマー（TMR）定義 [新規合成]

| ID | タイマー名 | 間隔/期限 | トリガーUC | 説明 | 導出根拠 |
|----|-----------|----------|-----------|------|---------|
| TMR-001 | トークン有効期限 | 約60分（Zoom OAuth標準） | UC-002 | アクセストークンの有効期限。期限前にリフレッシュトークンで自動更新 | UC002 代替フローA2、data_model.md AccessToken.expires_at |
| TMR-002 | 進捗更新ポーリング | 500ms | UC-006 | UI進捗表示の更新間隔。全体/個別進捗・転送速度・残り時間を定期計算 | UC006 基本フロー Step 7 |
| TMR-003 | ダウンロードタイムアウト | 30秒（設定可能: 5-300秒） | UC-005, UC-007 | 個別ファイルダウンロードのHTTP接続タイムアウト | ui_design_specifications.md SC002 ダウンロード設定 |
| TMR-004 | リトライバックオフ | 指数増加（1s→2s→4s） | UC-007 | エラー発生時の自動リトライ待機間隔。最大3回 | UC007 エラー分類表、rdra_analysis_models.md §6.4 |

---

## 8. 関係性マトリクス

### 8.1 ACT-UC マトリクス

| | UC-001 | UC-002 | UC-003 | UC-004 | UC-005 | UC-006 | UC-007 | UC-008 | UC-009 | UC-010 |
|---|---|---|---|---|---|---|---|---|---|---|
| ACT-001 | O | - | - | - | - | - | - | - | - | - |
| ACT-002 | - | O | - | - | - | - | - | - | - | - |
| ACT-003 | - | - | O | - | - | - | - | - | - | - |
| ACT-004 | - | - | O | O | - | - | - | - | - | - |
| ACT-005 | - | - | - | O | - | - | - | - | - | - |
| ACT-006 | - | - | - | - | O | - | - | - | - | - |
| ACT-007 | - | - | - | - | - | O | - | - | - | - |
| ACT-008 | - | - | - | - | - | - | O | - | - | - |
| ACT-009 | - | - | - | - | O | O | - | - | - | - |
| ACT-010 | - | - | - | - | - | - | - | O | - | - |
| ACT-011 | - | - | - | - | - | - | - | - | O | - |
| ACT-012 | - | - | - | - | - | - | - | - | - | O |

### 8.2 UC-SCR マトリクス

| | SCR-001 | SCR-002 | SCR-003 | SCR-004 | SCR-005 | SCR-006 |
|---|---|---|---|---|---|---|
| UC-001 | O | O | - | - | - | - |
| UC-002 | O | - | - | - | - | O |
| UC-003 | O | - | O | - | - | - |
| UC-004 | O | - | O | - | - | - |
| UC-005 | O | - | - | O | - | - |
| UC-006 | O | - | - | O | - | - |
| UC-007 | O | - | - | O | - | - |
| UC-008 | O | - | - | O | - | - |
| UC-009 | O | O | - | - | - | - |
| UC-010 | O | - | - | - | O | - |

### 8.3 EVT-UC マトリクス

| | UC-001 | UC-002 | UC-003 | UC-004 | UC-005 | UC-006 | UC-007 | UC-008 | UC-009 | UC-010 |
|---|---|---|---|---|---|---|---|---|---|---|
| EVT-001 | - | O | - | - | - | - | - | - | - | - |
| EVT-002 | - | - | O | - | - | - | - | - | - | - |
| EVT-003 | - | - | - | - | O | O | - | - | - | - |
| EVT-004 | - | - | - | - | - | - | O | - | - | - |
| EVT-005 | - | O | - | - | - | - | O | - | - | - |
| EVT-006 | - | - | - | - | - | - | - | O | - | - |
| EVT-007 | - | - | - | - | O | O | - | - | - | - |

### 8.4 TMR-UC マトリクス

| | UC-001 | UC-002 | UC-003 | UC-004 | UC-005 | UC-006 | UC-007 | UC-008 | UC-009 | UC-010 |
|---|---|---|---|---|---|---|---|---|---|---|
| TMR-001 | - | O | - | - | - | - | - | - | - | - |
| TMR-002 | - | - | - | - | - | O | - | - | - | - |
| TMR-003 | - | - | - | - | O | - | O | - | - | - |
| TMR-004 | - | - | - | - | - | - | O | - | - | - |

### 8.5 BUC-ACTOR 参加マトリクス

| | ACTOR-001 | ACTOR-002 | ACTOR-003 |
|---|---|---|---|
| BUC-001 | O | O | O |
| BUC-002 | O | O | O |
| BUC-003 | O | - | - |

---

# RDRA Sheet 03: 情報・状態シート（L4 情報・状態モデル）

**プロジェクト**: Zoom Video Mover
**RDRA準拠版**: 2.0
**作成日**: 2026-02-19
**ステータス**: 初版

---

## 1. 情報（INFO）定義

| ID | 情報名 | 説明 | 主要属性 | 導出元 |
|----|--------|------|---------|--------|
| INFO-001 | OAuthConfig | OAuth認証設定情報。Client ID/Secret/Redirect URI/Scopesを保持 | config_id, client_id, client_secret(暗号化), redirect_uri, scopes | data_model.md OAuthConfig |
| INFO-002 | AccessToken | OAuth認証トークン情報。アクセストークン・リフレッシュトークン・有効期限を保持 | token_id, access_token(暗号化), refresh_token(暗号化), expires_at, scope | data_model.md AccessToken |
| INFO-003 | Meeting | 会議メタデータ。会議ID・トピック・開始/終了時刻・参加者数・録画数を保持 | meeting_id, topic, start_time, end_time, duration_minutes, recording_count, total_size_bytes | data_model.md Meeting |
| INFO-004 | RecordingFile | 録画ファイルメタデータ。ファイルID・種別・サイズ・ダウンロードURL・ステータスを保持 | file_id, file_type, file_extension, file_size_bytes, download_url, status | data_model.md RecordingFile |
| INFO-005 | DownloadSession | ダウンロードセッション情報。セッション状態・ファイル数・バイト数・出力先を保持 | session_id, status, total_files, completed_files, failed_files, total_bytes, downloaded_bytes, output_directory | data_model.md DownloadSession |
| INFO-006 | DownloadTask | 個別ダウンロードタスク情報。タスク状態・進捗率・転送速度・リトライ回数を保持 | task_id, status, progress_percent, transfer_rate_bps, retry_count, error_message | data_model.md DownloadTask |
| INFO-007 | AISummary | AI要約情報。要約テキスト・キーポイント・アクションアイテム・信頼度スコアを保持 | summary_id, summary_text, overview, key_points, confidence_score, language | data_model.md AISummary |
| INFO-008 | AppConfig | アプリケーション設定情報。出力先・並列数・リトライ回数・タイムアウト・UI設定を保持 | config_id, output_directory, max_concurrent_downloads, retry_attempts, download_timeout_seconds, language, theme, log_level | data_model.md ApplicationConfig + UIConfig |

---

## 2. 状態（STATE）定義

> **※保持INFO** = 当該STATEの値を属性として持つINFOエンティティ

### STATE-001: セッション状態（DownloadSession.status）

| 状態名 | 説明 | 保持INFO |
|--------|------|---------|
| Pending | セッション作成済み、ダウンロード未開始 | INFO-005 |
| Running | ダウンロード実行中 | INFO-005 |
| Paused | ユーザー指示によりダウンロード一時停止中 | INFO-005 |
| Completed | 全ファイルのダウンロード正常完了 | INFO-005 |
| Failed | 回復不能エラーによりセッション失敗 | INFO-005 |
| Cancelled | ユーザー指示によりセッションキャンセル | INFO-005 |

**状態遷移表**:

| 遷移前 | 遷移後 | トリガー | トリガーUC |
|--------|--------|---------|-----------|
| (初期) | Pending | セッション作成 | UC-005 |
| Pending | Running | ダウンロード開始 | UC-005 |
| Running | Paused | ユーザー一時停止操作 | UC-005 (EVT-007) |
| Running | Completed | 全タスク完了 | UC-005 (EVT-003) |
| Running | Failed | 回復不能エラー | UC-007 (EVT-004) |
| Running | Cancelled | ユーザーキャンセル操作 | UC-005 (EVT-007) |
| Paused | Running | ユーザー再開操作 | UC-005 (EVT-007) |
| Paused | Cancelled | ユーザーキャンセル操作 | UC-005 (EVT-007) |

### STATE-002: タスク状態（DownloadTask.status）

| 状態名 | 説明 | 保持INFO |
|--------|------|---------|
| Queued | タスク作成済み、ダウンロード待機中 | INFO-006 |
| Downloading | ファイルダウンロード実行中 | INFO-006 |
| Completed | ダウンロード正常完了・整合性検証済み | INFO-006 |
| Failed | 最大リトライ回数超過により失敗 | INFO-006 |
| Retrying | エラー発生後のリトライ待機/実行中 | INFO-006 |
| Cancelled | ユーザーキャンセルにより中断 | INFO-006 |

**状態遷移表**:

| 遷移前 | 遷移後 | トリガー | トリガーUC |
|--------|--------|---------|-----------|
| (初期) | Queued | タスク作成 | UC-005 |
| Queued | Downloading | 並列スロット空き | UC-005 |
| Downloading | Completed | ダウンロード完了・整合性OK | UC-005 (EVT-003) |
| Downloading | Retrying | 一時的エラー検出 | UC-007 (EVT-004) |
| Downloading | Failed | 恒久的エラー検出 | UC-007 (EVT-004) |
| Downloading | Cancelled | ユーザーキャンセル | UC-005 (EVT-007) |
| Retrying | Downloading | リトライ待機完了 | UC-007 (TMR-004) |
| Retrying | Failed | 最大リトライ回数超過 | UC-007 |

### STATE-003: トークン状態（AccessToken の有効性状態）

| 状態名 | 説明 | 保持INFO |
|--------|------|---------|
| Absent | トークン未取得（初回認証前） | INFO-002 |
| Valid | アクセストークン有効期限内 | INFO-002 |
| Expired | アクセストークン有効期限切れ（リフレッシュ可能） | INFO-002 |
| Revoked | トークン無効化（再認証必要） | INFO-002 |

**状態遷移表**:

| 遷移前 | 遷移後 | トリガー | トリガーUC |
|--------|--------|---------|-----------|
| (初期) | Absent | アプリ初回起動 | - |
| Absent | Valid | OAuth認証成功 | UC-002 (EVT-001) |
| Valid | Expired | TMR-001期限到達 | UC-002 (TMR-001, EVT-005) |
| Expired | Valid | リフレッシュトークンで更新成功 | UC-002 |
| Expired | Revoked | リフレッシュトークン更新失敗 | UC-002 |
| Revoked | Valid | ユーザー再認証成功 | UC-002 (EVT-001) |

### STATE-004: アプリ起動状態

| 状態名 | 説明 | 保持INFO |
|--------|------|---------|
| Initializing | アプリケーション初期化中（設定読込） | INFO-008 |
| ConfigRequired | OAuth設定未完了、設定入力待ち | INFO-001 |
| AuthRequired | 設定完了、認証待ち | INFO-002 |
| Ready | 認証完了、操作可能（COND-001: トークン有効 かつ INFO-001: 設定完了が前提） | INFO-008 |
| Processing | ダウンロード等の処理実行中 | INFO-005 |

**状態遷移表**:

| 遷移前 | 遷移後 | トリガー | トリガーUC |
|--------|--------|---------|-----------|
| (初期) | Initializing | アプリ起動 | - |
| Initializing | ConfigRequired | 設定ファイル不在 | - (起動時判定) |
| Initializing | AuthRequired | 設定あり・トークン無効 | - (起動時判定) |
| Initializing | Ready | 設定あり・トークン有効 | - (起動時判定) |
| ConfigRequired | AuthRequired | 設定保存完了 | UC-001 |
| AuthRequired | Ready | 認証成功 | UC-002 (EVT-001) |
| Ready | Processing | ダウンロード/検索開始 | UC-003, UC-005 |
| Processing | Ready | 処理完了 | UC-005 |

### STATE-005: ファイル状態（RecordingFile.status）

| 状態名 | 説明 | 保持INFO |
|--------|------|---------|
| Available | Zoomクラウドに存在し、ダウンロード可能 | INFO-004 |
| Processing | Zoomクラウドで処理中（まだダウンロード不可） | INFO-004 |
| Deleted | Zoomクラウドから削除済み | INFO-004 |
| Expired | 保存期間超過により失効 | INFO-004 |

**状態遷移表**:

| 遷移前 | 遷移後 | トリガー | トリガーUC |
|--------|--------|---------|-----------|
| (初期) | Processing | 録画生成開始（Zoom側） | - (システムスコープ外: ユーザーの業務活動) |
| Processing | Available | 録画処理完了（Zoom側） | UC-003 (EVT-002) |
| Available | Deleted | ユーザーがZoom上で削除 | - (システムスコープ外: ユーザーの業務活動) |
| Available | Expired | 保存期間超過 | - (システムスコープ外: ユーザーの業務活動) |

### STATE-006: アクションアイテム状態（ActionItem.status）

| 状態名 | 説明 | 保持INFO |
|--------|------|---------|
| Pending | 未着手のアクションアイテム | INFO-007 |
| InProgress | 実行中のアクションアイテム | INFO-007 |
| Completed | 完了したアクションアイテム | INFO-007 |
| Cancelled | キャンセルされたアクションアイテム | INFO-007 |

**状態遷移表**:

| 遷移前 | 遷移後 | トリガー | トリガーUC |
|--------|--------|---------|-----------|
| (初期) | Pending | AI要約からアクションアイテム抽出 | UC-008 (EVT-006) |
| Pending | InProgress | ユーザーが着手 | - (システムスコープ外: ユーザーの業務活動) |
| Pending | Cancelled | ユーザーがキャンセル | - (システムスコープ外: ユーザーの業務活動) |
| InProgress | Completed | ユーザーが完了 | - (システムスコープ外: ユーザーの業務活動) |
| InProgress | Cancelled | ユーザーがキャンセル | - (システムスコープ外: ユーザーの業務活動) |

---

## 3. UC-INFO CRUDマトリクス

| | INFO-001 | INFO-002 | INFO-003 | INFO-004 | INFO-005 | INFO-006 | INFO-007 | INFO-008 |
|---|---|---|---|---|---|---|---|---|
| **UC-001** | **C/U** | - | - | - | - | - | - | - |
| **UC-002** | R | **C/U** | - | - | - | - | - | - |
| **UC-003** | - | R | **R** | **R** | - | - | - | R |
| **UC-004** | - | - | R | R | - | - | - | - |
| **UC-005** | - | R | R | R | **C/U** | **C/U** | - | R |
| **UC-006** | - | - | - | - | R | R | - | - |
| **UC-007** | - | R | - | R | U | **U** | - | R |
| **UC-008** | - | R | R | - | - | - | **C** | - |
| **UC-009** | R/U | - | - | - | - | - | - | **C/U** |
| **UC-010** | - | - | - | - | R | R | - | R |

**凡例**: C = Create, R = Read, U = Update, D = Delete, **太字** = 主要操作

---

# RDRA Sheet 04: 条件シート（L4 条件モデル）

**プロジェクト**: Zoom Video Mover
**RDRA準拠版**: 2.0
**作成日**: 2026-02-19
**ステータス**: 初版

---

## 1. 条件（COND）定義

| ID | 条件名 | 説明 | 判定基準 | 基づく要素 | 導出根拠 |
|----|--------|------|---------|-----------|---------|
| COND-001 | トークン有効 | アクセストークンが有効期限内であること | `now < AccessToken.expires_at` | STATE-003(Valid), INFO-002, TMR-001 | UC-002 代替フローA1 |
| COND-002 | トークン期限切れ | アクセストークンが有効期限を超過し、リフレッシュが必要な状態 | `now >= AccessToken.expires_at && refresh_token != null` | STATE-003(Expired), INFO-002, EVT-005 | UC-002 代替フローA2 |
| COND-003 | 並列数上限到達 | 同時ダウンロード数が設定上限に達している状態 | `active_tasks >= AppConfig.max_concurrent_downloads` | INFO-006, INFO-008 | UC-005 基本フロー Step 4、REQ-009 |
| COND-004 | APIレート制限到達 | Zoom APIのレート制限（10 req/sec）に到達した状態 | HTTP 429レスポンス受信 | EXTSYS-001, EVT-004 | UC-007 エラー分類表「API制限エラー」 |
| COND-005 | リトライ可能 | エラー発生後、リトライ回数が上限未満であること | `DownloadTask.retry_count < AppConfig.retry_attempts` | INFO-006, INFO-008, TMR-004 | UC-007 エラー分類表、REQ-011 |
| COND-006 | ディスク容量十分 | 出力先ディレクトリに十分な空き容量があること | `available_disk_space >= remaining_download_bytes` | EXTSYS-002, INFO-005 | UC-007 エラー分類表「ディスク容量不足」 |
| COND-007 | AI要約存在 | 対象会議にZoom AI要約データが生成済みであること | Zoom AI API がHTTP 200で要約データを返却 | INFO-003, INFO-007, EXTSYS-001 | UC-008 基本フロー Step 1 |
| COND-008 | セッションアイドルタイムアウト | ダウンロードセッションが一定時間無活動の状態 | **[GAP]** 既存ドキュメントに具体的なタイムアウト値の定義なし。推奨値: 30分 | STATE-001(Running), INFO-005 | 新規合成（運用要件として推定） |

---

## 2. COND-UC 決定マトリクス

各UCの実行フローにおいて、条件がどのように判定・影響するかを示す。

| | UC-001 | UC-002 | UC-003 | UC-004 | UC-005 | UC-006 | UC-007 | UC-008 | UC-009 | UC-010 |
|---|---|---|---|---|---|---|---|---|---|---|
| **COND-001** | - | 事前条件 | 事前条件 | - | 事前条件 | - | - | 事前条件 | - | - |
| **COND-002** | - | トリガー | - | - | - | - | トリガー | - | - | - |
| **COND-003** | - | - | - | - | フロー制御 | 表示更新 | - | - | - | - |
| **COND-004** | - | - | フロー制御 | - | フロー制御 | - | トリガー | フロー制御 | - | - |
| **COND-005** | - | - | - | - | - | - | 判定条件 | - | - | - |
| **COND-006** | - | - | - | - | 事前条件 | 表示警告 | トリガー | - | - | - |
| **COND-007** | - | - | - | - | - | - | - | 事前条件 | - | - |
| **COND-008** | - | - | - | - | フロー制御 | - | - | - | - | - |

> **※COND-007 × UC-008**: VAR-002=Basic（VAR-002-01）の場合、COND-007は常にfalseとなるため、UC-008は実行不可となる。

**凡例**:
- **事前条件**: UCの実行開始時に判定される前提条件
- **トリガー**: 条件成立がUCの実行を開始させる
- **フロー制御**: UC実行中のフロー分岐に使用される
- **判定条件**: UC内部のyes/no判定に使用される
- **表示更新**: UIの表示内容を変更する
- **表示警告**: ユーザーに警告を表示する

---

## 3. COND詳細定義

### COND-001: トークン有効

```
判定式: current_time < access_token.expires_at
真の場合: API呼び出しにアクセストークンを使用
偽の場合: COND-002を評価→リフレッシュフローまたは再認証フローへ

関連UC: UC-002（判定元）, UC-003（事前条件）, UC-005（事前条件）, UC-008（事前条件）
関連STATE: STATE-003 = Valid
関連TMR: TMR-001
```

### COND-002: トークン期限切れ

```
判定式: current_time >= access_token.expires_at AND refresh_token IS NOT NULL
真の場合: リフレッシュトークンでアクセストークンを自動更新
偽の場合: ユーザーに再認証を要求

関連UC: UC-002（トリガー）, UC-007（エラートリガー）
関連STATE: STATE-003 = Expired
関連EVT: EVT-005
```

### COND-003: 並列数上限到達

```
判定式: count(DownloadTask WHERE status = 'Downloading') >= AppConfig.max_concurrent_downloads
真の場合: 新規タスクをQueued状態で待機
偽の場合: 次のQueuedタスクをDownloading状態に遷移

関連UC: UC-005（フロー制御）, UC-006（UI表示）
関連INFO: INFO-005, INFO-006, INFO-008
デフォルト上限値: 5（設定範囲: 1-10）
```

### COND-004: APIレート制限到達

```
判定式: HTTP_RESPONSE.status_code == 429
真の場合: Retry-Afterヘッダ値の時間待機後に再試行
偽の場合: 通常フローを継続

関連UC: UC-003, UC-005, UC-007（トリガー）, UC-008
関連EXTSYS: EXTSYS-001（Zoom API制限: 10 req/sec）
関連EVT: EVT-004

注記: レート制限値（10 req/sec）はcontext_diagram.md §外部API制約に記載。
実装時にZoom公式APIドキュメントで再確認要。
```

### COND-005: リトライ可能

```
判定式: download_task.retry_count < app_config.retry_attempts
真の場合: TMR-004に従い指数バックオフ待機後にリトライ
偽の場合: タスクをFailed状態に遷移、エラーレポートに記録

関連UC: UC-007（判定条件）
関連INFO: INFO-006(retry_count), INFO-008(retry_attempts)
関連TMR: TMR-004
デフォルト上限: 3回
```

### COND-006: ディスク容量十分

```
判定式: get_available_disk_space(output_directory) >= session.total_bytes - session.downloaded_bytes
真の場合: ダウンロードフローを継続
偽の場合: ダウンロード一時停止、ユーザーに容量不足警告を表示

関連UC: UC-005（事前条件）, UC-006（警告表示）, UC-007（トリガー）
関連EXTSYS: EXTSYS-002
関連INFO: INFO-005
```

### COND-007: AI要約存在

```
判定式: zoom_ai_api.get_summary(meeting_id).status_code == 200
真の場合: AI要約データを取得・構造化・保存
偽の場合: AI要約取得をスキップ（警告ログ出力）

関連UC: UC-008（事前条件）
関連INFO: INFO-003, INFO-007
関連EXTSYS: EXTSYS-001

注記: VAR-002（アカウント種別）との交差制約あり。
VAR-002=Basic（VAR-002-01）の場合、COND-007は常にfalseとなる可能性がある。
詳細はsheet_05 §2.4 VAR-002×COND-007交差制約を参照。
```

### COND-008: セッションアイドルタイムアウト [GAP]

```
判定式: current_time - session.last_activity_time > IDLE_TIMEOUT_THRESHOLD
真の場合: セッションを自動一時停止、ユーザーに通知
偽の場合: セッションを継続

関連UC: UC-005（フロー制御）
関連STATE: STATE-001 = Running
関連INFO: INFO-005

[GAP] 既存ドキュメントにアイドルタイムアウトの定義なし。
推奨: 30分のアイドルタイムアウトを設定し、自動一時停止とする。
決定要: プロダクトオーナーの判断が必要。
```

---

# RDRA Sheet 05: バリエーションシート（L4 バリエーションモデル）

**プロジェクト**: Zoom Video Mover
**RDRA準拠版**: 2.0
**作成日**: 2026-02-19
**ステータス**: 初版

---

## 1. バリエーション（VAR）定義

### VAR-001: ファイル種別（FileType）

| ID | バリエーション名 | 説明 | 導出元 |
|----|-----------------|------|--------|
| VAR-001 | ファイル種別 | Zoom録画ファイルの種類。ダウンロード対象選択、フィルタリング、保存形式に影響する | data_model.md FileType enum |

| 値 | 値名 | 説明 | ファイル拡張子 |
|----|------|------|--------------|
| VAR-001-01 | MP4 | 動画ファイル（映像+音声） | .mp4 |
| VAR-001-02 | M4A | 音声のみファイル | .m4a |
| VAR-001-03 | CHAT | チャット履歴テキスト | .txt |
| VAR-001-04 | TRANSCRIPT | 文字起こしデータ | .vtt |
| VAR-001-05 | CC | クローズドキャプション | .vtt |
| VAR-001-06 | CSV | 参加者リスト等のCSVデータ | .csv |

---

### VAR-002: アカウント種別（AccountType）

| ID | バリエーション名 | 説明 | 導出元 |
|----|-----------------|------|--------|
| VAR-002 | アカウント種別 | Zoomアカウントのプラン種別。利用可能機能・API制限・ストレージ容量に影響する | data_model.md AccountType enum |

| 値 | 値名 | 説明 | AI要約利用可否 | ストレージ容量 |
|----|------|------|--------------|--------------|
| VAR-002-01 | Basic | 無料アカウント | 制限あり（COND-007に影響） | 制限あり |
| VAR-002-02 | Pro | 有料個人プラン | 利用可能 | 拡大 |
| VAR-002-03 | Business | 企業プラン | 利用可能 | 大容量 |
| VAR-002-04 | Enterprise | 大企業プラン | 完全利用可能 | 無制限 |

> **未文書化ギャップ**: VAR-002-01（Basic）とCOND-007（AI要約存在）の交差制約が未文書化。Basicアカウントの場合、AI要約機能（UC-008）が利用不可または制限される可能性がある。プロダクトオーナーによる確認が必要。

---

### VAR-003: ユーザー種別

| ID | バリエーション名 | 説明 | 導出元 |
|----|-----------------|------|--------|
| VAR-003 | ユーザー種別 | UIパーソナライズ変動要素。UI表示内容・表示詳細度・利用可能メニューに影響する。（ACTOR定義=利用者の役割分類、VAR-003=UI表示内容の変動要素として区別） | stakeholder_analysis.md, ACTOR-001〜003 |

| 値 | 値名 | 説明 | 対応ACTOR |
|----|------|------|----------|
| VAR-003-01 | 企業ユーザー | 組織内のIT管理者・PM・一般ユーザー | ACTOR-001 |
| VAR-003-02 | 個人ユーザー | フリーランス・コンサルタント・教育者 | ACTOR-002 |
| VAR-003-03 | IT管理者 | セキュリティ・運用管理者 | ACTOR-003 |

---

### VAR-004: UI言語

| ID | バリエーション名 | 説明 | 導出元 |
|----|-----------------|------|--------|
| VAR-004 | UI言語 | アプリケーションUIの表示言語。ラベル、メッセージ、エラー表示に影響する | REQ-014, ui_design_specifications.md SC002表示設定 |

| 値 | 値名 | 説明 |
|----|------|------|
| VAR-004-01 | 日本語 | デフォルト。全UI要素を日本語で表示 |
| VAR-004-02 | 英語 | 全UI要素を英語で表示 |

---

### VAR-005: ダウンロード選択範囲

| ID | バリエーション名 | 説明 | 導出元 |
|----|-----------------|------|--------|
| VAR-005 | ダウンロード選択範囲 | ユーザーが選択するダウンロード対象の粒度。UC-004のフロー分岐に影響する | UC-004 基本フロー、usage_scenarios.md |

| 値 | 値名 | 説明 | 対応シナリオ |
|----|------|------|------------|
| VAR-005-01 | 全選択 | 検索結果の全ファイルを一括選択 | シナリオ1: 定期バックアップ（全選択実行） |
| VAR-005-02 | 会議単位選択 | 特定会議の全ファイルを選択 | シナリオ2: プロジェクトアーカイブ（重要会議選択） |
| VAR-005-03 | ファイル個別選択 | 個別ファイルを手動選択 | シナリオ3: 重要会議保存（該当ファイルのみ） |
| VAR-005-04 | ファイル種別選択 | 特定ファイル種別（動画のみ等）を選択 | usage_scenarios.md フィルタ設定 |

---

## 2. VAR影響分析テーブル

### 2.1 VAR-UC 影響マトリクス

| | UC-001 | UC-002 | UC-003 | UC-004 | UC-005 | UC-006 | UC-007 | UC-008 | UC-009 | UC-010 |
|---|---|---|---|---|---|---|---|---|---|---|
| **VAR-001** | - | - | フィルタ条件 | 表示・選択 | 保存形式 | 表示分類 | - | - | フィルタ設定 | - |
| **VAR-002** | - | 認証スコープ | - | - | - | - | - | 利用可否 | - | - |
| **VAR-003** | 表示内容 | - | 表示情報量 | 表示カラム | - | 表示詳細度 | 表示内容 | - | 表示項目 | 表示詳細度 |
| **VAR-004** | 全ラベル | メッセージ | 全ラベル | 全ラベル | メッセージ | 全ラベル | エラーメッセージ | - | 全ラベル | 全ラベル |
| **VAR-005** | - | - | - | フロー分岐 | タスク生成数 | 表示対象 | - | - | - | - |

### 2.2 VAR-INFO 影響マトリクス

| | INFO-001 | INFO-002 | INFO-003 | INFO-004 | INFO-005 | INFO-006 | INFO-007 | INFO-008 |
|---|---|---|---|---|---|---|---|---|
| **VAR-001** | - | - | - | file_type属性 | - | - | - | include_file_types |
| **VAR-002** | - | scope属性 | - | - | - | - | 利用可否 | - |
| **VAR-003** | - | - | - | - | - | - | - | UI表示設定 |
| **VAR-004** | - | - | - | - | - | - | language属性 | language設定 |
| **VAR-005** | - | - | - | 選択対象 | total_files | タスク数 | - | - |

### 2.3 VAR-SCR 影響マトリクス

| | SCR-001 | SCR-002 | SCR-003 | SCR-004 | SCR-005 | SCR-006 |
|---|---|---|---|---|---|---|
| **VAR-001** | - | フィルタ設定 | チェックボックス | ファイル別表示 | - | - |
| **VAR-002** | - | - | - | - | - | 認証スコープ表示 |
| **VAR-003** | メニュー表示 | 表示項目数 | 表示カラム | 表示詳細度 | 表示詳細度 | - |
| **VAR-004** | 全ラベル | 全ラベル | 全ラベル | 全ラベル | 全ラベル | 全ラベル |
| **VAR-005** | - | - | 選択UI | - | - | - |

### 2.4 VAR-COND 交差影響

| | COND-001 | COND-002 | COND-003 | COND-004 | COND-005 | COND-006 | COND-007 | COND-008 |
|---|---|---|---|---|---|---|---|---|
| **VAR-001** | - | - | - | - | - | 容量計算に影響 | - | - |
| **VAR-002** | - | - | - | - (未確認) [GAP] | - | - | **交差制約** | - |
| **VAR-003** | - | - | - | - | - | - | - | - |
| **VAR-004** | - | - | - | - | - | - | - | - |
| **VAR-005** | - | - | 並列数に影響 | - | - | 必要容量に影響 | - | - |

> **VAR-002 × COND-007 交差制約**: BasicアカウントではAI Companion機能が制限されるため、COND-007（AI要約存在）の判定が常にfalseとなる可能性がある。この制約はシステム設計で考慮が必要。

---

# RDRA Sheet 06: 関係性定義（全要素間26+関係性）

**プロジェクト**: Zoom Video Mover
**RDRA準拠版**: 2.0
**作成日**: 2026-02-19
**ステータス**: 初版

---

## 関係性索引

| # | 関係性タイプ | ソース | ターゲット | 件数 |
|---|------------|--------|-----------|------|
| 1 | REQ↔ACTOR | REQ-001〜016 | ACTOR-001〜003 | 32 |
| 2 | REQ↔EXTSYS | REQ-001〜016 | EXTSYS-001〜002 | 11 |
| 3 | BIZ→BUC | BIZ-001 | BUC-001〜003 | 3 |
| 4 | BUC→ACTOR | BUC-001〜003 | ACTOR-001〜003 | 7 |
| 5 | BUC→UC | BUC-001〜003 | UC-001〜010 | 10 |
| 6 | ACT→UC | ACT-001〜012 | UC-001〜010 | 14 |
| 7 | UC→SCR | UC-001〜010 | SCR-001〜006 | 17 |
| 8 | EVT→UC | EVT-001〜007 | UC-001〜010 | 10 |
| 9 | TMR→UC | TMR-001〜004 | UC-001〜010 | 5 |
| 10 | UC→INFO (CRUD) | UC-001〜010 | INFO-001〜008 | 30 |
| 11 | INFO→STATE | INFO-001〜008 | STATE-001〜006 | 6 |
| 12 | COND基盤 | COND-001〜008 | STATE/INFO/EVT | 20 |
| 13 | COND→UC | COND-001〜008 | UC-001〜010 | 18 |
| 14 | VAR→UC | VAR-001〜005 | UC-001〜010 | 22 |
| 15 | VAR→INFO | VAR-001〜005 | INFO-001〜008 | 8 |
| 16 | VAR→SCR | VAR-001〜005 | SCR-001〜006 | 18 |
| 17 | VAR×COND | VAR-001〜005 | COND-001〜008 | 4 |
| 18 | REQ→UC(実現) | REQ-001〜016 | UC-001〜010 | 24 |
| 19 | UC→UC(include) | UC | UC | 2 |
| 20 | UC→UC(extend) | UC | UC | 1 |
| 21 | ACTOR→ACT | ACTOR-001〜003 | ACT-001〜012 | 15 |
| 22 | BUC→ACT | BUC-001〜003 | ACT-001〜012 | 12 |
| 23 | STATE遷移→EVT | STATE遷移 | EVT-001〜007 | 7 |
| 24 | STATE遷移→TMR | STATE遷移 | TMR-001〜004 | 3 |
| 25 | EXTSYS→EVT | EXTSYS-001〜002 | EVT-001〜007 | 3 |
| 26 | EXTSYS→COND | EXTSYS-001〜002 | COND-001〜008 | 3 |

**合計**: 26関係性タイプ、293件の個別関係

---

## 1. REQ↔ACTOR 関係性

要求とアクターの関係。どのアクターがどの要求を持つかを定義。

| REQ | ACTOR-001 | ACTOR-002 | ACTOR-003 | 根拠 |
|-----|-----------|-----------|-----------|------|
| REQ-001 OAuth認証 | O | O | O | 全ユーザーが認証を必要とする |
| REQ-002 録画一覧取得 | O | O | - | エンドユーザーが録画を検索する |
| REQ-003 ファイルDL | O | O | - | エンドユーザーがファイルを取得する |
| REQ-004 GUI操作 | O | O | O | 全ユーザーがGUIを利用する |
| REQ-005 CLI操作 | - | - | O | IT管理者が自動化スクリプトで利用 |
| REQ-006 進捗表示 | O | O | - | エンドユーザーが進捗を確認する |
| REQ-007 エラー処理 | O | O | O | 全ユーザーがエラー情報を必要とする |
| REQ-008 設定管理 | O | O | O | 全ユーザーが設定を管理する |
| REQ-009 並列DL | O | O | O | 性能は全ユーザーに影響 |
| REQ-010 レスポンス | O | O | O | 応答性能は全ユーザーに影響 |
| REQ-011 エラー回復 | O | O | O | 信頼性は全ユーザーに影響 |
| REQ-012 認証情報保護 | O | O | O | セキュリティは全ユーザーに影響 |
| REQ-013 Windows対応 | O | O | O | 互換性は全ユーザーに影響 |
| REQ-014 日本語対応 | O | O | O | UIは全ユーザーに影響 |
| REQ-015 ログ出力 | - | - | O | IT管理者が運用監視に利用 |
| REQ-016 モジュール分離 | - | - | O | IT管理者・開発者が保守性を必要とする |

---

## 2. REQ↔EXTSYS 関係性

| REQ | EXTSYS-001 (Zoom) | EXTSYS-002 (ローカルFS) | 根拠 |
|-----|-------------------|----------------------|------|
| REQ-001 | O (OAuth API) | - | Zoom OAuthを利用 |
| REQ-002 | O (Recording API) | - | Zoom APIを呼出し |
| REQ-003 | O (File Storage) | O (保存先) | Zoomからダウンロードしローカルに保存 |
| REQ-007 | O (APIエラー) | O (FSエラー) | 両外部システムのエラーを処理 |
| REQ-009 | O (レート制限) | - | Zoom APIレート制限に依存 |
| REQ-010 | O (API応答) | - | API応答時間に依存 |
| REQ-011 | O (ネットワーク) | - | ネットワークエラーからの回復 |
| REQ-012 | O (トークン) | O (暗号化保存) | トークンを暗号化してローカル保存 |

---

## 3. BIZ→BUC 関係性

| BIZ | BUC | 関係 |
|-----|-----|------|
| BIZ-001 Zoom録画管理業務 | BUC-001 初期設定・認証 | 業務の前提準備として含む |
| BIZ-001 Zoom録画管理業務 | BUC-002 録画取得・保存 | 業務の中核フローとして含む |
| BIZ-001 Zoom録画管理業務 | BUC-003 AI要約取得 | 業務の付加価値フローとして含む |

---

## 4. BUC→ACTOR 参加関係

| BUC | ACTOR-001 | ACTOR-002 | ACTOR-003 | 役割 |
|-----|-----------|-----------|-----------|------|
| BUC-001 | O (設定実施) | O (設定実施) | O (設定管理・監視) | 初回設定は全ユーザー、管理設定はIT管理者 |
| BUC-002 | O (検索・選択・DL) | O (検索・選択・DL) | O (監視・エラー対応) | エンドユーザーが実行、IT管理者は監視 |
| BUC-003 | O (AI要約取得) | - | - | 企業ユーザーがAI要約を活用 |

---

## 5. BUC→UC 所属関係

| BUC | UC | 役割 |
|-----|-----|------|
| BUC-001 初期設定・認証 | UC-001 OAuth認証設定 | 認証情報の入力・保存 |
| BUC-001 初期設定・認証 | UC-002 認証実行 | OAuthフロー実行 |
| BUC-001 初期設定・認証 | UC-009 設定管理 | アプリ設定の管理 |
| BUC-002 録画取得・保存 | UC-003 録画検索 | 録画リスト取得 |
| BUC-002 録画取得・保存 | UC-004 ファイル選択 | DL対象選択 |
| BUC-002 録画取得・保存 | UC-005 ダウンロード実行 | 並列DL実行 |
| BUC-002 録画取得・保存 | UC-006 進捗監視 | リアルタイム進捗 |
| BUC-002 録画取得・保存 | UC-007 エラー処理 | エラー回復 |
| BUC-003 AI要約取得 | UC-008 AI要約取得 | AI要約データ取得 |
| BUC-001 初期設定・認証 | UC-010 ログ確認 | 運用ログ監視 |

---

## 6. UC→UC 関係性（include/extend）

| ソースUC | ターゲットUC | 関係タイプ | 説明 | 導出根拠 |
|---------|------------|----------|------|--------|
| UC-001 | UC-002 | <<include>> | OAuth設定後に認証実行を包含 | usecase_specifications.md UC図 <<include>> |
| UC-005 | UC-006 | <<include>> | ダウンロード実行は進捗監視を包含 | usecase_specifications.md UC図 <<include>> |
| UC-005 | UC-007 | <<extend>> | エラー発生時にエラー処理を拡張 | usecase_specifications.md UC図 <<extend>> |

---

## 7. EVT→UC トリガー関係性

| EVT | トリガーUC | 関係内容 |
|-----|----------|---------|
| EVT-001 OAuthコールバック | UC-002 | 認証コード受信→トークン取得開始 |
| EVT-002 録画リストAPIレスポンス | UC-003 | APIレスポンス受信→録画リスト表示 |
| EVT-003 ファイルDL完了 | UC-005, UC-006 | 個別ファイル完了→全体進捗更新 |
| EVT-004 エラー検出 | UC-007 | エラー検出→エラー処理フロー起動 |
| EVT-005 トークン期限切れ | UC-002, UC-007 | 期限切れ検出→リフレッシュまたはエラー |
| EVT-006 AI要約APIレスポンス | UC-008 | 要約データ受信→構造化・保存 |
| EVT-007 ユーザー操作 | UC-005, UC-006 | 一時停止/再開/キャンセル→フロー制御 |

---

## 8. TMR→UC トリガー関係性

| TMR | トリガーUC | 関係内容 |
|-----|----------|---------|
| TMR-001 トークン有効期限 | UC-002 | 期限前にリフレッシュ、期限後はEVT-005発火 |
| TMR-002 進捗更新ポーリング | UC-006 | 500ms間隔でUI進捗を更新 |
| TMR-003 DLタイムアウト | UC-005, UC-007 | タイムアウト到達→エラー処理フロー |
| TMR-004 リトライバックオフ | UC-007 | バックオフ待機完了→リトライ実行 |

---

## 9. INFO→STATE 保持関係性

| INFO | 保持STATE | 説明 |
|------|----------|------|
| INFO-002 AccessToken | STATE-003 トークン状態 | トークンの有効性状態を保持 |
| INFO-004 RecordingFile | STATE-005 ファイル状態 | Zoom上のファイル状態を保持 |
| INFO-005 DownloadSession | STATE-001 セッション状態 | DLセッションの実行状態を保持 |
| INFO-006 DownloadTask | STATE-002 タスク状態 | 個別DLタスクの実行状態を保持 |
| INFO-007 AISummary (ActionItem) | STATE-006 アクションアイテム状態 | アクションアイテムの進捗状態を保持 |
| INFO-001 OAuthConfig | STATE-004 アプリ起動状態(ConfigRequired) | OAuth設定の有無で起動状態が分岐 |
| INFO-008 AppConfig | STATE-004 アプリ起動状態 | アプリケーションの起動状態を保持 |

---

## 10. COND基盤関係性（CONDが依存するSTATE/INFO/EVT）

| COND | 依存STATE | 依存INFO | 依存EVT/TMR | 説明 |
|------|----------|---------|------------|------|
| COND-001 トークン有効 | STATE-003 | INFO-002 | TMR-001 | トークン状態がValidであること |
| COND-002 トークン期限切れ | STATE-003 | INFO-002 | EVT-005 | トークン状態がExpiredに遷移したこと |
| COND-003 並列数上限 | STATE-002 | INFO-005, INFO-006, INFO-008 | - | アクティブタスク数が設定上限以上 |
| COND-004 レート制限 | - | - | EVT-004 | HTTP 429レスポンス検出 |
| COND-005 リトライ可能 | STATE-002 | INFO-006, INFO-008 | TMR-004 | リトライ回数が上限未満 |
| COND-006 ディスク容量 | - | INFO-005 | - | FS空き容量が残バイト数以上 |
| COND-007 AI要約存在 | - | INFO-003, INFO-007 | EVT-006 | AI APIが200レスポンスを返す |
| COND-008 アイドルタイムアウト | STATE-001 | INFO-005 | - | [GAP] 具体値未定義 |

---

## 11. EXTSYS→EVT 関係性

| EXTSYS | 生成EVT | 説明 |
|--------|---------|------|
| EXTSYS-001 Zoom | EVT-001 OAuthコールバック | Zoom OAuthサーバーが認証コードを送信 |
| EXTSYS-001 Zoom | EVT-002 録画リストAPIレスポンス | Zoom Recording APIがレスポンス返却 |
| EXTSYS-001 Zoom | EVT-006 AI要約APIレスポンス | Zoom AI APIがレスポンス返却 |

---

## 12. EXTSYS→COND 制約関係性

| EXTSYS | 制約COND | 説明 |
|--------|---------|------|
| EXTSYS-001 Zoom | COND-004 レート制限 | Zoom APIのレート制限（10 req/sec） |
| EXTSYS-001 Zoom | COND-007 AI要約存在 | Zoom AI機能の利用可否 |
| EXTSYS-002 ローカルFS | COND-006 ディスク容量 | ローカルディスクの空き容量制約 |

---

## 13. REQ→UC 実現関係性

要求がどのUCによって実現されるか。

| REQ | 実現UC | 説明 |
|-----|--------|------|
| REQ-001 OAuth認証 | UC-001, UC-002 | 設定と認証実行で実現 |
| REQ-002 録画一覧取得 | UC-003 | 録画検索で実現 |
| REQ-003 ファイルDL | UC-005 | ダウンロード実行で実現 |
| REQ-004 GUI操作 | UC-001〜010 (via SCR) | 全UCがGUI経由で操作可能 |
| REQ-005 CLI操作 | UC-003, UC-005 | 検索・DLのCLIモード |
| REQ-006 進捗表示 | UC-006 | 進捗監視で実現 |
| REQ-007 エラー処理 | UC-007 | エラー処理で実現 |
| REQ-008 設定管理 | UC-001, UC-009 | OAuth設定とアプリ設定で実現 |
| REQ-009 並列DL | UC-005 (COND-003) | 並列数制御で実現 |
| REQ-010 レスポンス | UC-003, UC-006 (TMR-002) | API呼出し・UI更新で実現 |
| REQ-011 エラー回復 | UC-007 (TMR-004, COND-005) | リトライ機構で実現 |
| REQ-012 認証情報保護 | UC-001, UC-002 | 暗号化保存で実現 |
| REQ-013 Windows対応 | UC-001〜010 | 全UCがWindows上で動作 |
| REQ-014 日本語対応 | UC-001〜010 (VAR-004) | UI言語バリエーションで実現 |
| REQ-015 ログ出力 | UC-010 | ログ確認で実現 |
| REQ-016 モジュール分離 | - (アーキテクチャ制約) | 設計制約として全UCに適用 |

---

## 14. STATE遷移→EVT/TMR 関係性

| STATE遷移 | トリガーEVT/TMR | 説明 |
|----------|----------------|------|
| STATE-001: Running→Paused | EVT-007 | ユーザー一時停止操作 |
| STATE-001: Running→Completed | EVT-003 | 全タスク完了 |
| STATE-001: Running→Failed | EVT-004 | 回復不能エラー |
| STATE-002: Downloading→Completed | EVT-003 | ファイルDL完了 |
| STATE-002: Downloading→Retrying | EVT-004 | 一時的エラー検出 |
| STATE-002: Retrying→Downloading | TMR-004 | バックオフ待機完了 |
| STATE-003: Valid→Expired | TMR-001 | トークン有効期限到達 |
| STATE-003: Expired→Valid | EVT-001 | リフレッシュ/再認証成功 |
| STATE-004: AuthRequired→Ready | EVT-001 | OAuth認証成功 |
| STATE-005: Processing→Available | EVT-002 | Zoom側録画処理完了 |

---

## 15. 整合性検証チェックリスト

| # | 検証項目 | 結果 | 備考 |
|---|---------|------|------|
| 1 | 全ACTORが1つ以上のREQを参照 | OK | ACTOR-001: 12件, ACTOR-002: 11件, ACTOR-003: 13件 |
| 2 | 全REQが1つ以上のACTORに参照 | OK | 全REQ-001〜016が最低1アクターに参照 |
| 3 | 全BUCが1つ以上のACTOR参加あり | OK | BUC-001: 3, BUC-002: 3, BUC-003: 1 |
| 4 | 全UCが正確に1つのBUCに所属 | OK | UC-001〜010が各1つのBUCに所属 |
| 5 | 全UCが1つ以上のSCRを使用 | OK | 全UCがSCR-001（メイン画面）+専用画面 |
| 6 | 全EVT/TMRが1つ以上のUCをトリガー | OK | EVT-001〜007: 各1-2件, TMR-001〜004: 各1-2件 |
| 7 | 全INFOが1つ以上のUCで生成・参照 | OK | INFO-001〜008: 各2件以上のCRUD操作 |
| 8 | 全STATEが正確に1つのINFOに保持 | OK | STATE-001〜006: 各1つのINFOに対応 |
| 9 | 全CONDが1つ以上のSTATE/INFO/EVTに基づく | OK | COND-001〜008: 各1件以上の基盤要素 |
| 10 | 全VARが1つ以上のUC/INFO/SCRに影響 | OK | VAR-001〜005: 各3件以上の影響先 |
| 11 | sheet_06の関係性がsheet_01〜05と双方向整合 | OK | 全マトリクスが各シートの定義と一致 |

---

# RDRA IDマッピングテーブル

**プロジェクト**: Zoom Video Mover
**RDRA準拠版**: 2.0
**作成日**: 2026-02-19
**ステータス**: 初版

---

## 1. 既存ID → RDRA ID クロスリファレンス

### 1.1 ステークホルダー・アクター

| 既存ID | 既存名称 | RDRA ID | RDRA名称 | マッピング根拠 |
|--------|---------|---------|---------|---------------|
| SH-001 | 一般ユーザー | - | （ACTOR-001/002に分割） | SH-001はACTOR-001,002に細分化 |
| SH-002 | パワーユーザー | - | （ACTOR-001に統合） | パワーユーザーは企業ユーザーの一部 |
| SH-003 | 企業ユーザー | ACTOR-001 | 企業ユーザー | 直接対応 |
| SH-004 | 開発者 | - | （スコープ外） | システム利用者ではなく開発者 |
| (stakeholder §1) | 企業ユーザー | ACTOR-001 | 企業ユーザー | 直接対応 |
| (stakeholder §2) | 個人ユーザー | ACTOR-002 | 個人ユーザー | 直接対応 |
| (stakeholder §3) | IT管理者・システム運用者 | ACTOR-003 | IT管理者 | 直接対応 |
| (stakeholder §4) | 開発・保守チーム | - | （スコープ外） | RDRA対象外 |
| (stakeholder §5) | Zoom Video Communications | EXTSYS-001 | Zoom Cloud Platform | 外部システムとして再分類 |
| (stakeholder §6) | Microsoft（Windows OS） | EXTSYS-002 | ローカルファイルシステム | 外部システムとして再分類 |

### 1.2 機能要求

| 既存ID | 既存名称 | RDRA ID | RDRA名称 | マッピング根拠 |
|--------|---------|---------|---------|---------------|
| FR001 | OAuth認証 | REQ-001 | OAuth認証 | 1:1対応 |
| FR002 | 録画一覧取得 | REQ-002 | 録画一覧取得 | 1:1対応 |
| FR003 | ファイルダウンロード | REQ-003 | ファイルダウンロード | 1:1対応 |
| FR004 | GUI操作 | REQ-004 | GUI操作 | 1:1対応 |
| FR005 | CLI操作 | REQ-005 | CLI操作 | 1:1対応 |
| FR006 | 進捗表示 | REQ-006 | 進捗表示 | 1:1対応 |
| FR007 | エラーハンドリング | REQ-007 | エラーハンドリング | 1:1対応 |
| FR008 | 設定管理 | REQ-008 | 設定管理 | 1:1対応 |

### 1.3 非機能要求

| 既存ID | 既存名称 | RDRA ID | RDRA名称 | マッピング根拠 |
|--------|---------|---------|---------|---------------|
| NFR001 | 性能（同時DL数） | REQ-009 | 同時ダウンロード数 | 1:1対応 |
| NFR002 | 性能（レスポンス時間） | REQ-010 | レスポンス時間 | 1:1対応 |
| NFR003 | 可用性（エラー回復） | REQ-011 | エラー回復 | 1:1対応 |
| NFR004 | セキュリティ（認証保護） | REQ-012 | 認証情報保護 | 1:1対応 |
| NFR005 | 互換性（Windows対応） | REQ-013 | Windows対応 | 1:1対応 |
| NFR006 | 使いやすさ（日本語） | REQ-014 | 日本語対応 | 1:1対応 |
| NFR007 | 保守性（ログ） | REQ-015 | ログ出力 | 1:1対応 |
| NFR008 | 拡張性（モジュール分離） | REQ-016 | モジュール分離設計 | 1:1対応 |

### 1.4 ユースケース

| 既存ID | 既存名称 | RDRA ID | RDRA名称 | マッピング根拠 |
|--------|---------|---------|---------|---------------|
| UC001 | OAuth認証設定 | UC-001 | OAuth認証設定 | 1:1対応（ID形式のみ変更） |
| UC002 | 認証実行 | UC-002 | 認証実行 | 1:1対応 |
| UC003 | 録画検索 | UC-003 | 録画検索 | 1:1対応 |
| UC004 | ファイル選択 | UC-004 | ファイル選択 | 1:1対応 |
| UC005 | ダウンロード実行 | UC-005 | ダウンロード実行 | 1:1対応 |
| UC006 | 進捗監視 | UC-006 | 進捗監視 | 1:1対応 |
| UC007 | エラー処理 | UC-007 | エラー処理 | 1:1対応 |
| UC008 | AI要約取得 | UC-008 | AI要約取得 | 1:1対応 |
| UC009 | 設定管理 | UC-009 | 設定管理 | 1:1対応 |
| UC010 | ログ確認 | UC-010 | ログ確認 | 1:1対応 |
| (rdra_analysis_models.md) UC1 | 録画ダウンロード | BUC-002 | 録画取得・保存 | rdra_analysis_models.mdの粗粒度UC。UC-003〜007に展開 |
| (rdra_analysis_models.md) UC2 | システム設定 | BUC-001 | 初期設定・認証 | rdra_analysis_models.mdの粗粒度UC。UC-001,009に展開 |
| (rdra_analysis_models.md) UC3 | 認証管理 | UC-002 | 認証実行 | rdra_analysis_models.mdの粗粒度UC。UC-002に対応 |

### 1.5 利用シナリオ

| 既存ID | 既存名称 | RDRA ACT ID | 導出先 | マッピング根拠 |
|--------|---------|------------|--------|---------------|
| US-001 | 基本ダウンロード | ACT-001〜009 | 全基本ACT | シナリオ1 (定期バックアップ) のフロー |
| US-002 | 高速ダウンロード | ACT-006, ACT-007 | DL実行+進捗 | シナリオ1の並列DL部分 |
| US-003 | バッチ処理 | ACT-005 | ファイル選択 | シナリオ7 (大量データ移行) の一括選択 |
| US-004 | API利用 | ACT-012 | ログ確認 | CLI/API利用パターン |
| US-005 | 設定管理 | ACT-001, ACT-011 | OAuth設定+設定変更 | 設定管理シナリオ |
| US-006 | フィルタリング | ACT-003 | 検索条件設定 | 検索フィルタパターン |
| (シナリオ1) | 定期バックアップ | ACT-001〜009 | 全基本フロー | usage_scenarios.md §プライマリ1 |
| (シナリオ2) | プロジェクトアーカイブ | ACT-003,004,005,010 | 選択的DL+AI要約 | usage_scenarios.md §プライマリ2 |
| (シナリオ3) | 重要会議保存 | ACT-003,005,006,009 | 即時保存フロー | usage_scenarios.md §プライマリ3 |

### 1.6 ビジネスフロー

| 既存ID | 既存名称 | RDRA ID | RDRA名称 | マッピング根拠 |
|--------|---------|---------|---------|---------------|
| BF-001 | システム起動 | BUC-001 | 初期設定・認証 | 起動→設定→認証フロー |
| BF-002 | 認証フロー | BUC-001 | 初期設定・認証 | OAuth認証実行部分 |
| BF-003 | 設定管理 | BUC-001 | 初期設定・認証 | アプリ設定管理部分 |

> **矛盾解決 #5**: BF-001〜003のIDはトレーサビリティマトリックスで参照されているが、business_flow_diagram.mdの見出しには使用されていない（「As-Is」「To-Be」構造）。RDRA正準化にあたり、BF-001〜003はBUC-001〜003として再編成した。

### 1.7 画面

| 既存ID | 既存名称 | RDRA ID | RDRA名称 | マッピング根拠 |
|--------|---------|---------|---------|---------------|
| SC001 / SC-001 | メイン画面 | SCR-001 | メイン画面 | 1:1対応 |
| SC002 / SC-002 | 設定画面 | SCR-002 | 設定画面 | 1:1対応 |
| SC003 / SC-003 | 認証画面 | SCR-006 | 認証ダイアログ | 画面→ダイアログに再分類 |
| (推定) | 録画検索画面 | SCR-003 | 録画検索画面 | ui_design_specifications.mdのタブ構造から推定 |
| (推定) | ダウンロード画面 | SCR-004 | ダウンロード画面 | ui_design_specifications.mdのタブ構造から推定 |
| (推定) | ログ画面 | SCR-005 | ログ画面 | ui_design_specifications.mdのタブ構造から推定 |

### 1.8 Phase間要素（非RDRA標準）→ RDRA要素への統合マッピング

| 既存ID | 既存名称 | RDRA対応 | マッピング根拠 |
|--------|---------|---------|---------------|
| CO-001 | Windows限定 | REQ-013 | 制約→非機能要求 |
| CO-002 | Zoom API制限 | COND-004, EXTSYS-001 | 制約→条件+外部システム |
| CO-003 | 個人開発 | - (スコープ外) | プロジェクト制約、RDRA対象外 |
| BV-001 | 効率性向上 | REQ-003, REQ-009 | ビジネス価値→機能要求 |
| BV-002 | 生産性向上 | REQ-006, REQ-010 | ビジネス価値→機能要求 |
| BV-003 | 業務効率化 | BUC-002 | ビジネス価値→BUC |
| BV-004 | 保守性 | REQ-015, REQ-016 | ビジネス価値→非機能要求 |

---

## 2. 矛盾解決記録（6件）

| # | 矛盾内容 | 解決方針 | 解決シート | 詳細 |
|---|---------|---------|-----------|------|
| 1 | **UC数の不一致**: rdra_analysis_models.mdのUC1-UC3 vs usecase_specifications.mdのUC001-UC010 | usecase_specifications.mdのUC001-UC010（10件）を正とする。UC1-UC3はBUC-001〜003として再解釈し、粗粒度の概要定義として位置付け | sheet_02_buc.md §2, §4 | rdra_analysis_models.mdの3UCは業務レベルの粒度であり、usecase_specifications.mdの10UCがシステムレベルの詳細定義。RDRA的にはBUC vs UCの粒度差として整合 |
| 2 | **ステークホルダー数の不一致**: トレーサビリティのSH-001〜004 vs stakeholder_analysisの6名 | システム利用者をACTOR-001〜003の3名に正規化。開発チーム=スコープ外、Zoom社=EXTSYS-001、Microsoft=EXTSYS-002 | sheet_01_req.md §1 | RDRA標準ではアクターはシステムの直接・間接利用者に限定。APIプロバイダー等は外部システムとして分類 |
| 3 | **FR数の不一致**: FR001-FR006 vs 後に追加されたFR007-FR008 | FR001-FR008の8件全てをREQ-001〜008として採用 | sheet_01_req.md §3 | rdra_analysis_models.md §5.1の最新版（8件）を正とする |
| 4 | **rdra_analysis_models.mdがRDRAを名乗りながら非標準フォーマット** | 既存rdra_analysis_models.mdを**参照元**として使用しつつ、sheet_01〜06で完全なRDRA正準フォーマットに置換 | 全シート | 既存6モデル構造（価値体系/コンテキスト/ビジネスフロー/ユースケース/要求仕様/方式設計）はRDRA標準の4レイヤー・14基本モデル（EVT/TMR/COND/VAR/INFO/STATE等）・26関係性を欠落した独自フォーマット |
| 5 | **BF-001〜003のIDがbusiness_flow_diagram.mdの見出しに未使用** | BF-001〜003はトレーサビリティマトリックス内の参照IDとして認識し、RDRA正準化ではBUC-001〜003に再編成 | sheet_02_buc.md §2 | business_flow_diagram.mdの実際の構造は「As-Is/To-Be」であり、BF-IDは使用されていない |
| 6 | **US-001〜006がトレーサビリティで6件だが、実際は9シナリオ** | 9シナリオ全てからACT-001〜012を導出。US-001〜006はトレーサビリティマトリックス用の集約IDとして認識 | sheet_02_buc.md §3 | usage_scenarios.mdの9シナリオ（プライマリ3+セカンダリ3+エクストリーム3）が正の情報源 |

---

## 3. 新規合成要素リスト（既存ドキュメントの散文記述から構造化抽出）

RDRA正準化にあたり、既存ドキュメントの散文記述を構造化し、RDRA標準要素として抽出・定式化した要素。

### 3.1 イベント（EVT）- 全7件新規合成

| RDRA ID | 名称 | 合成根拠 | 既存ドキュメント内の記述 |
|---------|------|---------|----------------------|
| EVT-001 | OAuthコールバック受信 | UC002 基本フロー Step 6-7 | 「Zoomが認証コードをRedirect URIに送信」 |
| EVT-002 | 録画リストAPIレスポンス | UC003 基本フロー Step 7 | 「システムがAPI レスポンスを解析する」 |
| EVT-003 | ファイルダウンロード完了 | UC005 基本フロー Step 6 | 「システムがファイル整合性をチェックする」 |
| EVT-004 | エラー検出 | UC007 エラー分類表 | 6種類のエラー検出方法 |
| EVT-005 | トークン期限切れ検出 | UC002 代替フローA2 | 「トークンが期限切れの場合」 |
| EVT-006 | AI要約APIレスポンス | UC008 基本フロー Step 3 | 「システムがAI要約レスポンスを受信する」 |
| EVT-007 | ユーザー操作イベント | UC005 代替フローA2 | 「ユーザーがダウンロードを一時停止した場合」 |

### 3.2 タイマー（TMR）- 全4件新規合成

| RDRA ID | 名称 | 合成根拠 | 既存ドキュメント内の記述 |
|---------|------|---------|----------------------|
| TMR-001 | トークン有効期限 | data_model.md AccessToken.expires_at | 「expires_at : DateTime」 |
| TMR-002 | 進捗更新ポーリング | UC006 基本フロー Step 7 | 「500ms間隔で情報を更新する」 |
| TMR-003 | ダウンロードタイムアウト | ui_design_specifications.md SC002 | 「タイムアウト [30] 秒」 |
| TMR-004 | リトライバックオフ | rdra_analysis_models.md §6.4 | 「指数バックオフで3回リトライ」 |

### 3.3 条件（COND）- 全8件新規合成

| RDRA ID | 名称 | 合成根拠 | 既存での記述状態 |
|---------|------|---------|----------------|
| COND-001 | トークン有効 | UC002 代替フローA1 | 暗黙的（事前条件として記述） |
| COND-002 | トークン期限切れ | UC002 代替フローA2 | 暗黙的（代替フロー条件） |
| COND-003 | 並列数上限到達 | UC005, ui_design_specifications.md | 暗黙的（設定値として存在） |
| COND-004 | APIレート制限到達 | UC007 エラー分類表 | 散文記述（エラー分類の一つ） |
| COND-005 | リトライ可能 | UC007 エラー分類表 | 暗黙的（リトライ条件として記述） |
| COND-006 | ディスク容量十分 | UC007 エラー分類表 | 散文記述（エラー分類の一つ） |
| COND-007 | AI要約存在 | UC008 基本フロー Step 1 | 暗黙的（事前条件として記述） |
| COND-008 | セッションアイドルタイムアウト | なし | **[GAP]** 完全に欠落 |

---

## 4. 未解決ギャップリスト

### 4.1 要決定ギャップ

| # | ギャップID | 要素 | 説明 | 推奨対応 | 優先度 |
|---|-----------|------|------|---------|--------|
| G-001 | COND-008 | セッションアイドルタイムアウト | 既存ドキュメントにアイドルタイムアウトの定義なし | 推奨値30分を設定し、設定画面で変更可能にする | 低 |
| G-002 | VAR-002 × COND-007 | BasicアカウントのAI要約アクセス制限 | Basicアカウントの場合のAI要約機能の利用可否・制限が未文書化 | ZoomのAPI仕様を確認し、アカウント種別ごとのAI機能利用可否テーブルを作成する | 中 |

### 4.2 精度改善ギャップ

| # | ギャップID | 要素 | 説明 | 推奨対応 | 優先度 |
|---|-----------|------|------|---------|--------|
| G-003 | SCR-003〜005 | 録画検索画面・ダウンロード画面・ログ画面 | ui_design_specifications.mdにSC003以降の詳細設計が部分的 | 画面設計の詳細化を別途実施 | 中 |
| G-004 | UC-010 → BUC | ログ確認UCの所属BUC | ログ確認はBUC-001（初期設定・認証）に暫定所属させたが、BUC-002（録画取得）からも参照される | 独立BUCとするか、横断的UCとして定義するか検討 | 低 |
| G-005 | REQ-005 CLI操作 | CLIモードの詳細仕様 | コマンドライン実行モードの具体的なインターフェース仕様が未文書化 | CLI仕様書の作成を検討 | 低 |

---

## 5. RDRA要素サマリ

| レイヤー | 要素種別 | ID範囲 | 件数 | 新規合成 |
|---------|---------|--------|------|---------|
| L1 システム価値 | ACTOR | ACTOR-001〜003 | 3 | 0 |
| L1 システム価値 | EXTSYS | EXTSYS-001〜002 | 2 | 0 |
| L1 システム価値 | REQ | REQ-001〜016 | 16 | 0 |
| L2 業務 | BIZ | BIZ-001 | 1 | 0 |
| L2 業務 | BUC | BUC-001〜003 | 3 | 0 |
| L3 利用 | ACT | ACT-001〜012 | 12 | 12 (形式化: 既存シナリオから構造化抽出) |
| L3 利用 | UC | UC-001〜010 | 10 | 0 |
| L3 利用 | SCR | SCR-001〜006 | 6 | 0 |
| L3 利用 | EVT | EVT-001〜007 | 7 | **7** |
| L3 利用 | TMR | TMR-001〜004 | 4 | **4** |
| L4 情報・状態 | INFO | INFO-001〜008 | 8 | 0 |
| L4 情報・状態 | STATE | STATE-001〜006 | 6 | 6 (形式化: data_model.mdのenum定義から抽出) |
| L4 条件 | COND | COND-001〜008 | 8 | **8** |
| L4 バリエーション | VAR | VAR-001〜005 | 5 | **5** |
| **合計** | | | **91** | **42** |

> **新規合成42件の内訳**: 完全新規24件（EVT 7件 + TMR 4件 + COND 8件 + VAR 5件）+ 形式化18件（ACT 12件 + STATE 6件）。形式化=既存ドキュメントに散文で記述されていた概念をRDRA標準要素として構造化したもの。

