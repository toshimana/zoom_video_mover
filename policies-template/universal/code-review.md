---
reusability: universal
version: 1.0.0
dependencies: []
customizable:
  - review_checklist
  - approval_requirements
---

# コードレビューポリシー - {{PROJECT_NAME}}

## 目的
コードレビューを通じた品質向上、知識共有、チーム成長の促進

## レビュープロセス

### 1. PR作成前の自己チェック
- [ ] コードが動作することを確認
- [ ] テストを追加/更新
- [ ] ドキュメントを更新
- [ ] リンター/フォーマッターを実行
- [ ] 不要なコード/コメントを削除

### 2. PR作成
```markdown
## 📋 PR概要
[変更の概要を1-2文で]

## 🎯 変更の目的
[なぜこの変更が必要か]

## 📝 変更内容
- [ ] 変更点1
- [ ] 変更点2

## 🧪 テスト方法
[レビュワーが確認できる手順]

## 📸 スクリーンショット
[UI変更の場合]

## ⚠️ 注意事項
[レビュワーが特に注意すべき点]

## 🔗 関連リンク
- Issue: #XXX
- ドキュメント: [リンク]
```

### 3. レビュー実施
**タイムライン**:
- 小規模PR（< 100行）: 1営業日以内
- 中規模PR（< 500行）: 2営業日以内
- 大規模PR（> 500行）: 要分割検討

## レビュー観点

### 🏗️ アーキテクチャ/設計
- [ ] 設計パターンが適切か
- [ ] 責務が適切に分離されているか
- [ ] 拡張性が考慮されているか
- [ ] 既存のアーキテクチャと整合性があるか

### 🔍 ロジック/実装
- [ ] ロジックが正しいか
- [ ] エッジケースが考慮されているか
- [ ] エラーハンドリングが適切か
- [ ] パフォーマンスの問題はないか

### 📖 可読性
- [ ] 変数名/関数名が分かりやすいか
- [ ] コードが自己文書化されているか
- [ ] 複雑な部分にコメントがあるか
- [ ] 不要な複雑性がないか

### 🧪 テスト
- [ ] テストカバレッジが十分か
- [ ] テストケースが網羅的か
- [ ] テストが理解しやすいか
- [ ] テストが保守しやすいか

### 🔒 セキュリティ
- [ ] 入力検証が適切か
- [ ] 機密情報が露出していないか
- [ ] SQLインジェクション等の脆弱性がないか
- [ ] 認証/認可が適切か

### 📚 ドキュメント
- [ ] APIドキュメントが更新されているか
- [ ] READMEが更新されているか
- [ ] コメントが最新か
- [ ] 変更履歴が記録されているか

## レビューコメントの書き方

### 良いコメントの例

#### 👍 建設的な提案
```
// 提案: この処理は map を使うとより簡潔に書けます
const results = items.map(item => processItem(item));

理由: 可読性が向上し、パフォーマンスも改善される可能性があります。
```

#### 👍 具体的な改善案
```
このループは O(n²) の計算量になっています。
HashMapを使用することで O(n) に改善できます：

[具体的なコード例]
```

#### 👍 良い点の指摘
```
👏 このエラーハンドリングは excellent です！
すべてのケースが網羅されていて、ユーザーフレンドリーなメッセージになっています。
```

### 避けるべきコメント

#### ❌ 曖昧な指摘
```
このコードはちょっと微妙です。
```

#### ❌ 個人的な好み
```
私ならこう書きます（理由なし）
```

#### ❌ 攻撃的な表現
```
なんでこんなコード書いたの？
```

## コメントのレベル

### 🔴 Must Fix（必須修正）
- バグ
- セキュリティ問題
- 重大なパフォーマンス問題
- 仕様違反

### 🟡 Should Fix（推奨修正）
- 設計上の問題
- 保守性の問題
- テスト不足
- ドキュメント不足

### 🟢 Consider（検討事項）
- 改善提案
- 別のアプローチ
- 将来の拡張性
- スタイルの提案

### 💭 Question（質問）
- 理解の確認
- 設計意図の確認
- 代替案の議論

### 💡 Note（メモ）
- 参考情報
- 関連リンク
- 将来の課題

## レビュー承認基準

### 承認に必要な条件
- [ ] すべての Must Fix が解決済み
- [ ] Should Fix が解決済み、または Issue 化済み
- [ ] CI/CD が全て Pass
- [ ] 必要な承認者数: {{REQUIRED_APPROVALS}}

### 承認者の責任
承認 = 「このコードを本番環境に出しても問題ない」という宣言

## 大規模変更のレビュー戦略

### PR分割の基準
- 機能単位で分割
- 1 PR = 1つの関心事
- 依存関係を明確化

### 段階的レビュー
1. **設計レビュー**: 実装前にアプローチを議論
2. **WIPレビュー**: 早期フィードバック
3. **最終レビュー**: 完成後の確認

## レビュー効率化のTips

### レビュワー向け
- 一度に15分以上レビューしない（集中力維持）
- 重要な部分から確認
- チェックリストを活用
- 良い点も積極的にコメント

### 作成者向け
- PRを小さく保つ
- 自己レビューを徹底
- レビュワーの負担を減らす説明を書く
- レビューコメントには素早く対応

## メトリクス

### 追跡指標
- レビューまでの時間
- レビューコメント数
- 修正往復回数
- レビュー後の不具合率

### 改善目標
- レビュー時間: 24時間以内
- 往復回数: 3回以内
- レビュー起因の不具合: ゼロ

---
**適用日**: {{POLICY_EFFECTIVE_DATE}}  
**レビュー周期**: 四半期ごと