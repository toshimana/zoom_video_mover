@startuml ビジネスユースケース図
!theme plain

skinparam backgroundColor #FAFAFA
skinparam actorBackgroundColor #FFE4B5
skinparam usecaseBackgroundColor #E8F4FD
skinparam packageBackgroundColor #F0F8E8

title ビジネスユースケース図 - Zoom Video Mover

' アクター定義
actor "会議主催者" as Host
actor "システム管理者" as SysAdmin  
actor "IT管理者" as ITAdmin

' システム境界
package "Zoom Video Mover System" {
  
  ' 主要ユースケース
  usecase "UC1: 録画ダウンロード" as UC1
  usecase "UC2: システム設定" as UC2
  usecase "UC3: 認証管理" as UC3
  usecase "UC4: ファイル管理" as UC4
  usecase "UC5: ログ監視" as UC5
  
  ' 詳細ユースケース
  usecase "録画一覧表示" as UC1_1
  usecase "ファイル選択" as UC1_2
  usecase "一括ダウンロード" as UC1_3
  usecase "進捗監視" as UC1_4
  
  usecase "OAuth設定" as UC2_1
  usecase "保存先設定" as UC2_2
  usecase "ログレベル設定" as UC2_3
  
  usecase "認証情報入力" as UC3_1
  usecase "トークン管理" as UC3_2
  usecase "権限確認" as UC3_3
}

' 外部システム
actor "Zoom API" as ZoomAPI

' アクターとユースケースの関連
Host --> UC1 : "会議録画を\nダウンロード"
Host --> UC4 : "ファイル確認"

SysAdmin --> UC2 : "システム設定"
SysAdmin --> UC3 : "認証設定"
SysAdmin --> UC5 : "ログ確認"

ITAdmin --> UC2 : "管理設定"
ITAdmin --> UC3 : "セキュリティ管理"
ITAdmin --> UC5 : "システム監視"

' ユースケース間の関係
UC1 ..> UC1_1 : <<include>>
UC1 ..> UC1_2 : <<include>>
UC1 ..> UC1_3 : <<include>>
UC1 ..> UC1_4 : <<include>>

UC2 ..> UC2_1 : <<include>>
UC2 ..> UC2_2 : <<include>>
UC2 ..> UC2_3 : <<include>>

UC3 ..> UC3_1 : <<include>>
UC3 ..> UC3_2 : <<include>>
UC3 ..> UC3_3 : <<include>>

' 前提条件関係
UC1 ..> UC3 : <<extend>>\n認証が必要
UC1_3 ..> UC3_2 : <<extend>>\nトークン有効性確認

' 外部システムとの関係
UC1 --> ZoomAPI : "API呼出し"
UC3 --> ZoomAPI : "OAuth認証"

' ノート
note right of UC1
  **基本フロー**
  1. 録画一覧取得
  2. ファイル選択
  3. ダウンロード実行
  4. 完了確認
  
  **代替フロー**
  - 認証エラー時の再認証
  - ネットワークエラー時のリトライ
  - 容量不足時の警告
end note

note right of UC2
  **設定項目**
  - OAuth認証情報
  - デフォルト保存先
  - 同時ダウンロード数
  - ログ出力レベル
  - プロキシ設定
end note

note right of UC3
  **セキュリティ要件**
  - OAuth 2.0準拠
  - 認証情報の暗号化保存
  - アクセストークンの自動更新
  - 権限スコープの適切な設定
end note

@enduml